@inject ApplicationDbContext _db
@inject IDDLHelper _ddlHelper
@inject ApplicationDbContext _context

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_ConsumerDashboardLayout.cshtml";
    DateTime today = DateTime.Now;
    int day = -1;
    String SMDate = DateTime.Now.ToShortDateString();
    DateTime OrderDate = DateTime.Now;
    string errorMessage = "";
    List<UserDateChoiceDetail> udcdBrk = new List<UserDateChoiceDetail>();
    List<UserDateChoiceDetail> udcdTBrk = new List<UserDateChoiceDetail>();
    List<UserDateChoiceDetail> udcdLn = new List<UserDateChoiceDetail>();
    List<int> Days = new List<int>(new int[] { 1, 2, 3, 4, 5 });
    List<string> WeekDays = new List<string>(new string[] { "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday" });
    List<string> Months = new List<string>(new string[] { "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" });

    var OnSpotList = new Dictionary<string, string>();

    var brkItemList = "";
    var tbrkItemList = "";
    var lunchItemList = "";

    var OnSpotItemList = _db.StoreOutItem.Where(x => x.Id > 0).ToList();

    foreach (var i in OnSpotItemList)
    {

        OnSpotList.Add(i.Id.ToString(), i.Name);
    }

    int daay = 0;
    int month = 0;
    long year = 0;

    if (ViewBag.MenuDate != null)
    {
        SMDate = ViewBag.MenuDate.ToShortDateString();
        OrderDate = ViewBag.MenuDate;

    }
    if (ViewBag.ErrorMessage != null)
    {
        errorMessage = ViewBag.ErrorMessage;

    }
    string[] Datearray = SMDate.Split("/");
    daay = Int32.Parse(Datearray[1]);
    month = Int32.Parse(Datearray[0]);
    year = Int32.Parse(Datearray[2]);
    string showdate = daay.ToString() + '-' + month.ToString() + '-' + year.ToString();

    day = (int)OrderDate.DayOfWeek + 1;


    String UserId = ViewBag.UserId;

    var SetMenuListBrk = new Dictionary<string, string>();
    var SetMenuListLn = new Dictionary<string, string>();

    var SetMenuListTea = new Dictionary<string, string>();


    var STMBrk = _db.DailySetMenu.Where(x => x.Day == day && x.MealTypeId == 1).ToList();
    var STMLnch = _db.DailySetMenu.Where(x => x.Day == day && x.MealTypeId == 2).ToList();
    var STMTBreak = _db.DailySetMenu.Where(x => x.Day == day && x.MealTypeId == 3).ToList();


    var preSchedulePersonBrk = _db.PreOrderSchedule.Where(x => x.MealTypeId == 1 && x.UserId == UserId).LastOrDefault();
    var preSchedulePersonLnch = _db.PreOrderSchedule.Where(x => x.MealTypeId == 2 && x.UserId == UserId).LastOrDefault();
    var preSchedulePersonTBrk = _db.PreOrderSchedule.Where(x => x.MealTypeId == 3 && x.UserId == UserId).LastOrDefault();


    var periodPersonBrk = _db.Period.Where(x => x.MealTypeId == 1 && x.UserId == UserId).LastOrDefault();
    var periodPersonLnch = _db.Period.Where(x => x.MealTypeId == 2 && x.UserId == UserId).LastOrDefault();
    var periodPersonTBrk = _db.Period.Where(x => x.MealTypeId == 3 && x.UserId == UserId).LastOrDefault();

    Boolean showmenu = false;
    Boolean showmenu2 = false;
    Boolean showmenu3 = false;

    var dateMasterBRK = _db.UserDateChoiceMaster.Where(x => x.UserId == UserId && x.MealTypeId == 1).FirstOrDefault();
    var dateMasterTBRK = _db.UserDateChoiceMaster.Where(x => x.UserId == UserId && x.MealTypeId == 3).FirstOrDefault();
    var dateMasterLn = _db.UserDateChoiceMaster.Where(x => x.UserId == UserId && x.MealTypeId == 2).FirstOrDefault();
    if (dateMasterBRK != null)
    {
        udcdBrk = _db.UserDateChoiceDetail.Where(x => x.UserDateChoiceMasterId == dateMasterBRK.Id).OrderBy(x => x.Date).ToList();
    }
    if (dateMasterTBRK != null)
    {
        udcdTBrk = _db.UserDateChoiceDetail.Where(x => x.UserDateChoiceMasterId == dateMasterTBRK.Id).OrderBy(x => x.Date).ToList();
    }
    if (dateMasterLn != null)
    {
        udcdLn = _db.UserDateChoiceDetail.Where(x => x.UserDateChoiceMasterId == dateMasterLn.Id).OrderBy(x => x.Date).ToList();
    }


    if (periodPersonBrk != null && periodPersonBrk.From <= OrderDate && OrderDate <= periodPersonBrk.To)
    {

        if (periodPersonBrk.Active == false)
        {
            showmenu = false;
        }
        else
        {
            //if(preSchedulePersonBrk.IsPreOrderSet == true)
            //{
            showmenu = true;
            //        }
            //else
            //        {
            //            showmenu = false;
            //        }
        }

    }
    else
    {
        if (preSchedulePersonBrk != null)
        {
            if (preSchedulePersonBrk.IsPreOrderSet == true)
            {
                showmenu = true;
            }
            else
            {
                showmenu = false;
            }
        }
    }
    if (periodPersonLnch != null && periodPersonLnch.From <= OrderDate && OrderDate <= periodPersonLnch.To)
    {


        if (periodPersonLnch.Active == false)
        {
            showmenu2 = false;
        }
        else
        {
            //if(preSchedulePersonLnch.IsPreOrderSet == true)
            //{
            showmenu2 = true;
            //    }
            //else
            //    {
            //        showmenu2 = false;
            //    }
        }

    }
    else
    {
        if (preSchedulePersonLnch != null)
        {
            if (preSchedulePersonLnch.IsPreOrderSet == true)
            {
                showmenu2 = true;
            }
            else
            {
                showmenu2 = false;
            }
        }
    }
    if (periodPersonTBrk != null && periodPersonTBrk.From <= OrderDate && OrderDate <= periodPersonTBrk.To)
    {

        if (periodPersonTBrk.Active == false)
        {
            showmenu3 = false;
        }
        else
        {
            //if(preSchedulePersonTBrk.IsPreOrderSet == true)
            //{
            showmenu3 = true;
            //        }
            //else
            //        {
            //            showmenu3 = false;
            //        }
        }

    }
    else
    {
        if (preSchedulePersonTBrk != null)
        {
            if (preSchedulePersonTBrk.IsPreOrderSet == true)
            {
                showmenu3 = true;
            }
            else
            {
                showmenu3 = false;
            }
        }
    }



    int ib = 0;
    foreach (var i in STMBrk)
    {
        ib++;
        SetMenuListBrk.Add(i.SetMenuId.ToString(), "SetMenu" + ib);
    }
    int il = 0;
    foreach (var i in STMLnch)
    {
        il++;
        SetMenuListLn.Add(i.SetMenuId.ToString(), "SetMenu" + il);
    }
    int it = 0;

    foreach (var i in STMTBreak)
    {
        it++;
        SetMenuListTea.Add(i.SetMenuId.ToString(), "SetMenu" + it);

    }
    var extraChitListBFPrnt = _context.ConsumerMealWiseExtraChitParent.Where(x => x.UserId == UserId && x.MealTypeId == 1).FirstOrDefault();


    var extraChitListTBRKPrnt = _context.ConsumerMealWiseExtraChitParent.Where(x => x.UserId == UserId && x.MealTypeId == 3).FirstOrDefault();

    //var extraChitListTBRK = _context.ConsumerMealWiseExtrachit.Where(x => x.ConsumerMealWiseExtraChitParentId == extraChitListTBRKPrnt.Id).ToList();

    var extraChitListLnPrnt = _context.ConsumerMealWiseExtraChitParent.Where(x => x.UserId == UserId && x.MealTypeId == 2).FirstOrDefault();

    //var extraChitListLn = _context.ConsumerMealWiseExtrachit.Where(x => x.ConsumerMealWiseExtraChitParentId == extraChitListLnPrnt.Id).ToList();

}


<head>

    @*<link rel="apple-touch-icon" sizes="76x76" href="~/assets/img/apple-icon.png">
        <link rel="icon" type="image/png" href="~/assets/img/favicon.png">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

        <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">


        <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
        <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>
        <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
        <link href="~/assets/css/material-dashboard.css?v=2.1.1" rel="stylesheet" />
        <link href="~/assets/demo/demo.css" rel="stylesheet" />*@
    <link href="~/assets/css/material-dashboardCut.css" rel="stylesheet" />
    @*<link href="~/assets/demo/demo.css" rel="stylesheet" />*@

</head>




<style>


    .btn {
        /*padding: 2px 2px;*/
        font-size: 12px;
        cursor: pointer;
        margin: 0;
        padding-top: 2px;
        padding-left: 2px;
        padding-right: 2px;
        padding-bottom: 8px;
        color: black;
    }

    hr.divider {
        margin: .5em;
        border-width: 2px;
        margin-top: 2px;
    }

    body {
        font-family: 'Roboto', sans-serif;
        color: #546E7A;
    }

    .wrapper {
        max-width: 18rem;
        padding: 0 0.5rem;
        margin-left: auto;
        margin-right: auto;
        padding-top: 4rem;
    }

    hr.divider {
        margin: .5em;
        border-width: 2px;
    }


    input:focus {
        outline: none;
    }

    #ui-datepicker-div {
        display: none;
        background-color: #fff;
        box-shadow: 0 0.125rem 0.5rem rgba(0,0,0,0.1);
        margin-top: 0.25rem;
        border-radius: 0.5rem;
        padding: 0.5rem;
    }

    table {
        border-collapse: collapse;
        border-spacing: 0;
    }

    .ui-datepicker-calendar thead th {
        padding: 0.25rem 0;
        text-align: center;
        font-size: 0.75rem;
        font-weight: 400;
        color: #78909C;
    }

    .ui-datepicker-calendar tbody td {
        width: 2.5rem;
        text-align: center;
        padding: 0;
    }

        .ui-datepicker-calendar tbody td a {
            display: block;
            border-radius: 0.25rem;
            line-height: 2rem;
            transition: 0.3s all;
            color: #546E7A;
            font-size: 0.875rem;
            text-decoration: none;
        }

            .ui-datepicker-calendar tbody td a:hover {
                background-color: #E0F2F1;
            }

            .ui-datepicker-calendar tbody td a.ui-state-active {
                background-color: #009688;
                color: white;
            }

    .ui-datepicker-header a.ui-corner-all {
        cursor: pointer;
        position: absolute;
        top: 0;
        width: 2rem;
        height: 2rem;
        margin: 0.5rem;
        border-radius: 0.25rem;
        transition: 0.3s all;
    }

        .ui-datepicker-header a.ui-corner-all:hover {
            background-color: #ECEFF1;
        }

    .ui-datepicker-header a.ui-datepicker-prev {
        left: 0;
        background: url("~/assets/img/prev.png");
        background-repeat: no-repeat;
        background-size: 0.5rem;
        background-position: 50%;
        transform: rotate(180deg);
    }

    .ui-datepicker-header a.ui-datepicker-next {
        right: 0;
        background: url("~/assets/img/prev.png");
        background-repeat: no-repeat;
        background-size: 10px;
        background-position: 50%;
    }

    .ui-datepicker-header a > span {
        display: none;
    }

    .ui-datepicker-title {
        text-align: center;
        line-height: 2rem;
        margin-bottom: 0.25rem;
        font-size: 0.875rem;
        font-weight: 500;
        padding-bottom: 0.25rem;
    }

    .ui-datepicker-week-col {
        color: #78909C;
        font-weight: 400;
        font-size: 0.75rem;
    }

    .modalModify {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        padding-top: 100px; /* Location of the box */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgb(0,0,0); /* Fallback color */
        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    }

    /* Modal Content */
    .modalModify-content {
        background-color: #fefefe;
        margin: auto;
        padding: 20px;
        border: 1px solid #888;
        width: 40%;
    }

    /* The Close Button */
    .closeModify {
        color: #aaaaaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }

        .closeModify:hover,
        .closeModify:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }

    .checkBoxClass {
        position: inherit;
        opacity: 1;
        left: 0px;
    }

    .textBox {
        width: 300px;
        border: 1px solid;
        /* padding: 2px;
        margin: 2px;*/
        height: 150px;
        font-size: 14px;
    }

    .modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        /*z-index: 1;*/ /* Sit on top */
        padding-top: 100px; /* Location of the box */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgb(0,0,0); /* Fallback color */
        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        padding-left: 100px;
    }

    /* Modal Content */
    .modal-content {
        background-color: #fefefe;
        margin: auto;
        padding: 20px;
        border: 1px solid #888;
        width: 40%;
    }

    /* The Close Button */
    .close {
        color: #aaaaaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }

        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }


    /* Safari */

</style>
<div id="myModal" class="modalModify">



    <div class="modalModify-content">
        <span class="closeModify">&times;</span>
        <div class="card">
            <div class="body">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-6 col-md-6"><div class="font-bold m-b--35">BREAKFAST</div></div>

                    <div class="col-md-6 col-xs-12 col-sm-12">
                        <div class="switch">
                            OnOffModify
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<section class="content" style="margin-top:0px;">

    <div class="container-fluid">

        <div class="modal" id="loadModal">
            <div class="modal-content">
                <div style="text-align:center;">
                    <div class="loader">
                        <div class="preloader">
                            <div class="spinner-layer pl-red">
                                <div class="circle-clipper left">
                                    <div class="circle"></div>
                                </div>
                                <div class="circle-clipper right">
                                    <div class="circle"></div>
                                </div>
                            </div>
                        </div>
                        <p style="font-size:14px;">Please Wait for save...</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="fileUploadModal" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">×</button>
                        <h4 class="modal-title">Add Comment</h4>
                    </div>
                    <div class="modal-body">
                        <textarea id="commentsUpload" class="form-control custom-control" rows="3"></textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" onclick="submitXYX()" data-dismiss="modal">Submit</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="onSpotEdit" class="modal">
            <div class="modal-content">
                <div class="row">

                    <div class="col-sm-3" id="removeLabel">

                    </div>
                    <div class="col-sm-1" id="removeCheck">

                    </div>
                    <div class="col-sm-3" id="itemFld">

                    </div>
                    <div class="col-sm-3" id="itemQntFld">

                    </div>
                    <div class="col-sm-2">

                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">

                    </div>
                    <div class="col-sm-5">
                        <textarea id="editRemarks" name="editRemarks" style="font-size:14px;" placeholder=""></textarea>


                    </div>
                    <div class="col-sm-1">

                    </div>

                </div>
                <div class="row" style="padding-top:20px;">
                    <div class="col-sm-6">

                    </div>

                    <div class="col-sm-3">
                        <button class="btn" onclick="ConfirmEdit()" style="padding:3px;"> Save</button>
                    </div>
                    <div class="col-sm-3">
                        <button class="btn" onclick="CloseModal()" style="padding:3px;"> Close</button>

                    </div>
                </div>

            </div>
        </div>

        <div id="deleteModal" class="modal">
            <div class="modal-content">
                <div class="row">
                    Are you sure to remove the date?
                </div>
                <div class="row">
                    <div class="col-sm-6">

                    </div>
                    <div class="col-sm-3" id="ConfirmDelete">

                    </div>
                    <div class="col-sm-3">
                        <button onclick="closeDeleteModal()" class="btn btn-primary" style="padding:3px;">
                            Close
                        </button>
                    </div>
                </div>

            </div>
        </div>


        <div class="row">
            <div class="col-sm-3">
                <div class="card card-stats">
                    <div class="card-header-warning ">
                        <div class="card-icon">
                            <i class="material-icons">store</i>
                        </div>
                        <h3 class="card-title">
                            Breakfast
                        </h3>
                    </div>
                    <div class="card-body">
                        @{
                            var check = "unchecked";
                            string msg = "";
                            if (preSchedulePersonBrk != null)
                            {
                                if (preSchedulePersonBrk.IsPreOrderSet == true)
                                {
                                    check = "checked";
                                }
                            }


                        }

                        <div class="switch">
                            <label>OFF<input type="checkbox" onchange="OnOffModify(1)" id="BrkOnOff" name="BrkOnOff" value="" @check><span class="lever switch-col-red"></span>ON</label> @*@(Convert.ToBoolean(ViewBag.UserSettings.IsBreakfastOnOff) == true ? "checked='checked'" : string.Empty)*@
                        </div>
                    </div>

                </div>
            </div>
            <div class="col-sm-1">

            </div>
            <div class="col-sm-3">
                <div class="card card-stats">
                    <div class="card-header-danger ">
                        <div class="card-icon">
                            <i class="material-icons">store</i>
                        </div>
                        <h3 class="card-title">
                            Teabreak
                        </h3>
                    </div>
                    <div class="card-body">
                        @{
                            var check2 = "unchecked";
                            if (preSchedulePersonTBrk != null)
                            {
                                if (preSchedulePersonTBrk.IsPreOrderSet == true)
                                {
                                    check2 = "checked";
                                }
                            }


                        }
                        <div class="switch">
                            <label>OFF<input type="checkbox" onchange="OnOffModify(3)" id="TOnOff" name="TOnOff" value="" @check2><span class="lever switch-col-red"></span>ON</label> @*@(Convert.ToBoolean(ViewBag.UserSettings.IsBreakfastOnOff) == true ? "checked='checked'" : string.Empty)*@
                        </div>
                    </div>

                </div>
            </div>
            <div class="col-sm-1">

            </div>
            <div class="col-sm-3">
                <div class="card card-stats">
                    <div class="card-header-success">
                        <div class="card-icon">
                            <i class="material-icons">store</i>
                        </div>
                        <h3 class="card-title">
                            Lunch
                        </h3>
                    </div>
                    <div class="card-body">
                        @{
                            var check3 = "unchecked";
                            if (preSchedulePersonLnch != null)
                            {
                                if (preSchedulePersonLnch.IsPreOrderSet == true)
                                {
                                    check3 = "checked";
                                }
                            }


                        }
                        <div class="switch">
                            <label>OFF<input type="checkbox" onchange="OnOffModify(2)" id="LncOnOff" name="LncOnOff" value="" @check3><span class="lever switch-col-red"></span>ON</label> @*@(Convert.ToBoolean(ViewBag.UserSettings.IsBreakfastOnOff) == true ? "checked='checked'" : string.Empty)*@
                        </div>
                    </div>

                </div>
            </div>
            <div class="col-sm-1">

            </div>

        </div>

        <div class="row">
            <div class="col-sm-4">
                @if (preSchedulePersonBrk != null)
                {
                @if (preSchedulePersonBrk.IsPreOrderSet == true)
                {
                    <div class="card">
                        <div class="card-header-success" style="font-size:14px;">
                            Add Additional Breakfast Items.
                        </div>
                        <div class="card-body">
                            <div class="row" style="padding-left:10px;">
                                <p style="font-size:14px;font-weight: bold;color: red;">
                                    Add extra breakfast items according to your choice.
                                </p>
                            </div>
                            @if (extraChitListBFPrnt != null)
                            {
                                var extraChitListBF = _context.ConsumerMealWiseExtrachit.Where(x => x.ConsumerMealWiseExtraChitParentId == extraChitListBFPrnt.Id).ToList();

                                @if (extraChitListBF.Count > 0)
                                {
                                    <div class="row" style="padding-left:10px; padding-top:10px;">
                                        <div class="jumbotron" style="width:325px;">
                                            @foreach (var i in extraChitListBF)
                                            {
                                                brkItemList += _context.StoreOutItem.Where(x => x.Id == i.StoreOutItemId).FirstOrDefault().Name + " ";
                                                <div class="row">
                                                    <div class="col-sm-6" style="font-size:15px;padding-top:10px;">
                                                        @_db.StoreOutItem.Where(x => x.Id == i.StoreOutItemId).FirstOrDefault().Name
                                                    </div>
                                                    <div class="col-sm-6" style="font-size:15px;padding-top:10px;">
                                                        @i.quantity
                                                    </div>
                                                </div>
                                            }
                                            <div class="row" style="padding-left:14px;padding-top:20px;">

                                                <p style="font-size:14px;font-weight: bold;color: red;">
                                                    @extraChitListBFPrnt.Remarks
                                                </p>
                                            </div>
                                            <div class="row" style="padding-top:15px;">
                                                <div class="col-sm-8">

                                                </div>
                                                <div class="col-sm-4">
                                                    <button class="btn btn-success" style="padding:3px;" onclick="editOrder(@extraChitListBFPrnt.Id)"> Edit </button>

                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                }
                            }
                            <div class="row" style="padding-top: 10px;">
                                <div class="col-sm-6" id="BFConsumerExtraChit">

                                    <div style="padding-top:10px;" id="BFExtraChitDrop1">
                                        @*<div style="display:inline-flex">*@

                                        <select id="BFextraItem1" name="BFextraItem1" class="form-control border-radius-none" asp-items="@(new SelectList(OnSpotList.Prepend(new KeyValuePair<string, string>("0", "Select Extra Chit")), "Key", "Value", ""))"></select>

                                        @*</div>*@


                                    </div>
                                </div>
                                <div class="col-sm-3" id="BFConsumerExtraCHitInp">
                                    @*<div class="form-group">
                                        <label class="bmd-label-floating">Quantity</label>*@
                                    @*<div style="display:inline-flex">*@
                                    <input type="number" id="BFitmQ1" name="BFitmQ1" class="form-control" min="1" required />
                                    @*</div>*@
                                    @*</div>*@

                                </div>
                                <div class="col-sm-3" id="BFButtonParent">

                                    <div id="BFConsumerExtraCHitButton1" style="padding-bottom:35px;">
                                        <button class="btn btn-success" style="padding:3px;" id="BFMorebtn1" onclick="AddMoreExtra(1,'BFConsumerExtraChit','BFextraItem','BFConsumerExtraCHitInp','BFitmQ','BFConsumerExtraCHitButton','BFMorebtn','BFButtonParent','BFExtraChitDrop')">Add More</button>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-7">
                                    <div class="form-group">
                                        <div style="display:inline-flex">
                                            @*<input  id="BFremarks" name="remarks" class="form-control" />*@

                                            <textarea id="BFremarks" name="BFremarks" style="font-size:14px;" placeholder="Write down if you have any remarks"></textarea>

                                            @*<input type="text" id="BFremarks" name="remarks" class="form-control" />*@
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                </div>

                                <div class="col-sm-3" style="padding-top:20px;">
                                    <button class="btn btn-success" style="padding:3px;" onclick="SubmitExtra(1,'BFextraItem','BFitmQ','BFremarks')">Submit</button>

                                </div>

                            </div>




                        </div>
                    </div>
                }
                }

            </div>
            <div class="col-sm-4">
                @if (preSchedulePersonTBrk != null)
                {
                @if (preSchedulePersonTBrk.IsPreOrderSet == true)
                {
                    <div class="card">
                        <div class="card-header-success" style="font-size:14px;">
                            Add Additonal Teabreak items.
                        </div>
                        <div class="card-body">
                            <div class="row" style="padding-left:10px;">
                                <p style="font-size:14px;font-weight: bold;color: red;">
                                    Add extra teabreak items according to your choice.
                                </p>
                            </div>

                            @if (extraChitListTBRKPrnt != null)
                            {
                                var extraChitListTBRK = _context.ConsumerMealWiseExtrachit.Where(x => x.ConsumerMealWiseExtraChitParentId == extraChitListTBRKPrnt.Id).ToList();

                                @if (extraChitListTBRK.Count > 0)
                                {
                                    <div class="row" style="padding-left:10px;padding-top:10px;">
                                        <div class="jumbotron" style="width:325px;">
                                            @foreach (var i in extraChitListTBRK)
                                            {
                                                tbrkItemList += _context.StoreOutItem.Where(x => x.Id == i.StoreOutItemId).FirstOrDefault().Name + " ";

                                                <div class="row">
                                                    <div class="col-sm-6" style="font-size:15px;padding-top:10px;">
                                                        @_db.StoreOutItem.Where(x => x.Id == i.StoreOutItemId).FirstOrDefault().Name
                                                    </div>
                                                    <div class="col-sm-6" style="font-size:15px;padding-top:10px;">
                                                        @i.quantity
                                                    </div>
                                                </div>
                                            }
                                            <div class="row" style="padding-left:14px;padding-top:20px;">

                                                <p style="font-size:15px;font-weight:bold;color:red;"> @extraChitListTBRKPrnt.Remarks</p>
                                            </div>
                                            <div class="row" style="padding-top:15px;">
                                                <div class="col-sm-8">

                                                </div>
                                                <div class="col-sm-4">
                                                    <button class="btn btn-success" style="padding:3px;" onclick="editOrder(@extraChitListTBRKPrnt.Id)"> Edit </button>

                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                }
                            }
                            <div class="row" style="padding-top: 10px;">
                                <div class="col-sm-6" id="TBRKConsumerExtraChit">

                                    <div style="padding-top:10px;" id="TBRKExtraChitDrop1">
                                        @*<div style="display:inline-flex">*@

                                        <select id="TBRKextraItem1" name="TBRKextraItem1" class="form-control border-radius-none" asp-items="@(new SelectList(OnSpotList.Prepend(new KeyValuePair<string, string>("0", "Select Extra Chit")), "Key", "Value", ""))"></select>

                                        @*</div>*@


                                    </div>
                                </div>
                                <div class="col-sm-3" id="TBRKConsumerExtraCHitInp">
                                    @*<div class="form-group">
                                        <label class="bmd-label-floating">Quantity</label>*@
                                    @*<div style="display:inline-flex">*@
                                    <input type="number" id="TBRKitmQ1" name="TBRKitmQ1" class="form-control" min="1" required />
                                    @*</div>*@
                                    @*</div>*@

                                </div>
                                <div class="col-sm-3" id="TBRKButtonParent">

                                    <div id="TBRKConsumerExtraCHitButton1" style="padding-bottom:35px;">
                                        <button class="btn btn-success" style="padding:3px;" id="TBRKMorebtn1" onclick="AddMoreExtra(3,'TBRKConsumerExtraChit','TBRKextraItem','TBRKConsumerExtraCHitInp','TBRKitmQ','TBRKConsumerExtraCHitButton','TBRKMorebtn','TBRKButtonParent','TBRKExtraChitDrop')">Add More</button>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-7">
                                    <div class="form-group">
                                        <div style="display:inline-flex">
                                            @*<input  id="BFremarks" name="remarks" class="form-control" />*@

                                            <textarea id="TBRKremarks" name="TBRKremarks" style="font-size:14px;" placeholder="Write down if you have any remarks"></textarea>

                                            @*<input type="text" id="BFremarks" name="remarks" class="form-control" />*@
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                </div>

                                <div class="col-sm-3" style="padding-top:20px;">
                                    <button class="btn btn-success" style="padding:3px;" onclick="SubmitExtra(3,'TBRKextraItem','TBRKitmQ','TBRKremarks')">Submit</button>

                                </div>

                            </div>




                        </div>
                    </div>
                }
                }
            </div>
            <div class="col-sm-4">
                @if (preSchedulePersonLnch != null)
                {
                @if (preSchedulePersonLnch.IsPreOrderSet == true)
                {
                    <div class="card">
                        <div class="card-header-success" style="font-size:14px;">
                            Add Additional Lunch Items.
                        </div>
                        <div class="card-body">
                            <div class="row" style="padding-left:10px;">
                                <p style="font-size:14px;font-weight: bold;color: red;">
                                    Add extra lunch items according to your choice.
                                </p>
                            </div>
                            @if (extraChitListLnPrnt != null)
                            {
                                var extraChitListLn = _context.ConsumerMealWiseExtrachit.Where(x => x.ConsumerMealWiseExtraChitParentId == extraChitListLnPrnt.Id).ToList();

                                @if (extraChitListLn.Count > 0)
                                {
                                    <div class="row" style="padding-left:10px;padding-top:10px;">
                                        <div class="jumbotron" style="width:325px;">
                                            @foreach (var i in extraChitListLn)
                                            {
                                                lunchItemList += _context.StoreOutItem.Where(x => x.Id == i.StoreOutItemId).FirstOrDefault().Name + " ";

                                                <div class="row">
                                                    <div class="col-sm-6" style="font-size:15px;padding-top:10px;">
                                                        @_db.StoreOutItem.Where(x => x.Id == i.StoreOutItemId).FirstOrDefault().Name
                                                    </div>
                                                    <div class="col-sm-6" style="font-size:15px;padding-top:10px;">
                                                        @i.quantity
                                                    </div>
                                                </div>
                                            }
                                            <div class="row" style="padding-left:20px;padding-top:20px;">

                                                <p style="font-size:14px;font-weight: bold;color: red;">
                                                    @extraChitListLnPrnt.Remarks
                                                </p>

                                            </div>
                                            <div class="row" style="padding-top:15px;">
                                                <div class="col-sm-8">

                                                </div>
                                                <div class="col-sm-4">
                                                    <button class="btn btn-success" style="padding:3px;" onclick="editOrder(@extraChitListLnPrnt.Id)"> Edit </button>

                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                }
                            }

                            <div class="row" style="padding-top: 10px;">
                                <div class="col-sm-6" id="LnConsumerExtraChit">

                                    <div style="padding-top:10px;" id="LnExtraChitDrop1">
                                        @*<div style="display:inline-flex">*@

                                        <select id="LnextraItem1" name="LnextraItem1" class="form-control border-radius-none" asp-items="@(new SelectList(OnSpotList.Prepend(new KeyValuePair<string, string>("0", "Select Extra Chit")), "Key", "Value", ""))"></select>

                                        @*</div>*@


                                    </div>
                                </div>
                                <div class="col-sm-3" id="LnConsumerExtraCHitInp">
                                    @*<div class="form-group">
                                        <label class="bmd-label-floating">Quantity</label>*@
                                    @*<div style="display:inline-flex">*@
                                    <input type="number" id="LnitmQ1" name="LnitmQ1" class="form-control" min="1" required />
                                    @*</div>*@
                                    @*</div>*@

                                </div>
                                <div class="col-sm-3" id="LnButtonParent">

                                    <div id="LnConsumerExtraCHitButton1" style="padding-bottom:35px;">
                                        <button class="btn btn-success" style="padding:3px;" id="LnMorebtn1" onclick="AddMoreExtra(2,'LnConsumerExtraChit','LnextraItem','LnConsumerExtraCHitInp','LnitmQ','LnConsumerExtraCHitButton','LnMorebtn','LnButtonParent','LnExtraChitDrop')">Add More</button>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-sm-7">
                                    <div class="form-group">
                                        <div style="display:inline-flex">
                                            @*<input  id="BFremarks" name="remarks" class="form-control" />*@

                                            <textarea id="Lnremarks" name="Lnremarks" style="font-size:14px;" placeholder="Write down if you have any remarks"></textarea>

                                            @*<input type="text" id="BFremarks" name="remarks" class="form-control" />*@
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                </div>

                                <div class="col-sm-3" style="padding-top:20px;">
                                    <button class="btn btn-success" style="padding:3px;" onclick="SubmitExtra(2,'LnextraItem','LnitmQ','Lnremarks')">Submit</button>

                                </div>

                            </div>




                        </div>
                    </div>
                    }
                }
            </div>
        </div>
        <div class="row" style="display:none;">
            <div class="col-sm-4">
                <div class="card card-stats">
                    <div class="card-header card-header-warning card-header-icon">
                        <div class="card-icon">
                            <i class="material-icons">store</i>
                        </div>
                        <h2 class="card-title" style="padding-left:0px;">
                            Breakfast
                        </h2>
                    </div>
                    <div class="card-body" style="padding-top:0px;">
                        <hr class="divider" />
                        <div class="row" style="padding-top:0px;padding-bottom:0px;">
                            <div class="col-sm-3">

                            </div>
                            <div class="col-sm-6">

                                <h3>On/Off For Period</h3>
                            </div>

                            <div class="col-sm-3">

                            </div>
                        </div>
                        <div class="row">
                            @{
                                var check4 = "unchecked";
                                string from = "";
                                string to = "";
                                if (periodPersonBrk != null)
                                {
                                    if (periodPersonBrk.From <= OrderDate && OrderDate <= periodPersonBrk.To && periodPersonBrk.Active == true)
                                    {
                                        string frm = periodPersonBrk.From.ToShortDateString();
                                        string[] dtfrm = frm.Split('/');
                                        from = dtfrm[1] + '-' + dtfrm[0] + '-' + dtfrm[2];
                                        string too = periodPersonBrk.To.ToShortDateString();
                                        string[] dtto = too.Split('/');
                                        to = dtto[1] + '-' + dtto[0] + '-' + dtto[2];
                                        check4 = "checked";
                                    }
                                    if (periodPersonBrk.From <= OrderDate && OrderDate <= periodPersonBrk.To && periodPersonBrk.Active == false)
                                    {
                                        string frm = periodPersonBrk.From.ToShortDateString();
                                        string[] dtfrm = frm.Split('/');
                                        from = dtfrm[1] + '-' + dtfrm[0] + '-' + dtfrm[2];
                                        string too = periodPersonBrk.To.ToShortDateString();
                                        string[] dtto = too.Split('/');
                                        to = dtto[1] + '-' + dtto[0] + '-' + dtto[2];
                                        check4 = "unchecked";
                                    }

                                }


                            }

                            <div class="col-sm-4" style="padding-right:0px;padding-left:0px;">
                                <input type="text" id="datepicker" value="@from" name="datepicker" class="form-control col-sm-10" placeholder="From..">
                            </div>
                            <div class="col-sm-4" style="padding-right:0px;padding-left:0px;">
                                <input type="text" id="datepicker2" value="@to" name="datepicker2" class="form-control col-sm-10" placeholder="To..">
                            </div>
                            <div class="switch col-sm-4" style="padding-right:0px;padding-left:0px;padding-top:10px;">
                                <label>OFF<input type="checkbox" onchange="PeriodModify(1)" id="BrkPeriod" name="BrkPeriod" value="true" @check4><span class="lever switch-col-red"></span>ON</label> @*@(Convert.ToBoolean(ViewBag.UserSettings.IsBreakfastOnOff) == true ? "checked='checked'" : string.Empty)*@
                            </div>
                        </div>


                    </div>

                </div>
            </div>
            @*<div class="col-sm-1">

                </div>*@
            <div class="col-sm-4">
                <div class="card card-stats">
                    <div class="card-header card-header-success card-header-icon">
                        <div class="card-icon">
                            <i class="material-icons">store</i>
                        </div>
                        <h2 class="card-title" style="padding-left:0px;">
                            Teabreak
                        </h2>
                    </div>
                    <div class="card-body" style="padding-top:0px;">
                        <hr class="divider" />
                        <div class="row" style="padding-top:0px;padding-bottom:0px;">
                            <div class="col-sm-3">

                            </div>
                            <div class="col-sm-6">

                                <h3>On/Off For Period</h3>
                            </div>

                            <div class="col-sm-3">

                            </div>
                        </div>
                        <div class="row">
                            @{
                                var check5 = "unchecked";
                                string from2 = "";
                                string to2 = "";
                                if (periodPersonTBrk != null)
                                {
                                    if (periodPersonTBrk.From <= OrderDate && OrderDate <= periodPersonTBrk.To && periodPersonTBrk.Active == true)
                                    {
                                        string frm = periodPersonTBrk.From.ToShortDateString();
                                        string[] dtfrm = frm.Split('/');
                                        from2 = dtfrm[1] + '-' + dtfrm[0] + '-' + dtfrm[2];
                                        string too = periodPersonTBrk.To.ToShortDateString();
                                        string[] dtto = too.Split('/');
                                        to2 = dtto[1] + '-' + dtto[0] + '-' + dtto[2];
                                        check5 = "checked";
                                    }
                                    if (periodPersonTBrk.From <= OrderDate && OrderDate <= periodPersonTBrk.To && periodPersonTBrk.Active == false)
                                    {
                                        string frm = periodPersonTBrk.From.ToShortDateString();
                                        string[] dtfrm = frm.Split('/');
                                        from2 = dtfrm[1] + '-' + dtfrm[0] + '-' + dtfrm[2];
                                        string too = periodPersonTBrk.To.ToShortDateString();
                                        string[] dtto = too.Split('/');
                                        to2 = dtto[1] + '-' + dtto[0] + '-' + dtto[2];
                                        check5 = "unchecked";

                                    }
                                }


                            }
                            <div class="col-sm-4" style="padding-right:0px;padding-left:0px;">
                                <input type="text" id="datepicker3" value="@from2" name="datepicker3" class="form-control col-sm-10" placeholder="From..">
                            </div>
                            <div class="col-sm-4" style="padding-right:0px;padding-left:0px;">
                                <input type="text" id="datepicker4" value="@to2" name="datepicker4" class="form-control col-sm-10" placeholder="To..">
                            </div>
                            <div class="switch col-sm-4" style="padding-right:0px;padding-left:0px;padding-top:10px;">
                                <label>OFF<input type="checkbox" onchange="PeriodModify(3)" id="TBrkPeriod" name="TBrkPeriod" value="true" @check5><span class="lever switch-col-red"></span>ON</label> @*@(Convert.ToBoolean(ViewBag.UserSettings.IsBreakfastOnOff) == true ? "checked='checked'" : string.Empty)*@
                            </div>
                        </div>


                    </div>

                </div>
            </div>

            <div class="col-sm-4">
                <div class="card card-stats">
                    <div class="card-header card-header-danger card-header-icon">
                        <div class="card-icon">
                            <i class="material-icons">store</i>
                        </div>
                        <h2 class="card-title" style="padding-left:0px;">
                            Lunch
                        </h2>
                    </div>
                    <div class="card-body" style="padding-top:0px;">
                        <hr class="divider" />
                        <div class="row" style="padding-top:0px;padding-bottom:0px;">
                            <div class="col-sm-3">

                            </div>
                            <div class="col-sm-6">

                                <h3>On/Off For Period</h3>
                            </div>

                            <div class="col-sm-3">

                            </div>
                        </div>
                        <div class="row">
                            @{
                                var check6 = "unchecked";
                                string from3 = "";
                                string to3 = "";
                                if (periodPersonLnch != null)
                                {
                                    if (periodPersonLnch.From <= OrderDate && OrderDate <= periodPersonLnch.To && periodPersonLnch.Active == true)
                                    {
                                        string frm = periodPersonLnch.From.ToShortDateString();
                                        string[] dtfrm = frm.Split('/');
                                        from3 = dtfrm[1] + '-' + dtfrm[0] + '-' + dtfrm[2];
                                        string too = periodPersonLnch.To.ToShortDateString();
                                        string[] dtto = too.Split('/');
                                        to3 = dtto[1] + '-' + dtto[0] + '-' + dtto[2];
                                        check6 = "checked";
                                    }
                                    if (periodPersonLnch.From <= OrderDate && OrderDate <= periodPersonLnch.To && periodPersonLnch.Active == false)
                                    {
                                        string frm = periodPersonLnch.From.ToShortDateString();
                                        string[] dtfrm = frm.Split('/');
                                        from3 = dtfrm[1] + '-' + dtfrm[0] + '-' + dtfrm[2];
                                        string too = periodPersonLnch.To.ToShortDateString();
                                        string[] dtto = too.Split('/');
                                        to3 = dtto[1] + '-' + dtto[0] + '-' + dtto[2];
                                        check6 = "unchecked";

                                    }
                                }


                            }
                            <div class="col-sm-4" style="padding-right:0px;padding-left:0px;">
                                <input type="text" id="datepicker5" name="datepicker" value="@from3" class="form-control col-sm-10" placeholder="From..">
                            </div>
                            <div class="col-sm-4" style="padding-right:0px;padding-left:0px;">
                                <input type="text" id="datepicker6" name="datepicker" value="@to3" class="form-control col-sm-10" placeholder="To..">
                            </div>
                            <div class="switch col-sm-4" style="padding-right:0px;padding-left:0px;padding-top:10px;">
                                <label>OFF<input type="checkbox" onchange="PeriodModify(2)" id="LnPeriod" name="LnPeriod" value="true" @check6><span class="lever switch-col-red"></span>ON</label> @*@(Convert.ToBoolean(ViewBag.UserSettings.IsBreakfastOnOff) == true ? "checked='checked'" : string.Empty)*@
                            </div>
                        </div>


                    </div>

                </div>
            </div>


        </div>

        @*New Date Concept from BUP-----------------------------------------*@
        <div class="row">
            @*@if (preSchedulePersonBrk.IsPreOrderSet == true)
                {*@
            <div class="col-sm-4">
                <div class="card">
                    <div class="card-header-success" style="font-size:15px;">
                        On or Off your Breakfast for any specific date.
                    </div>
                    <div class="card-body">
                        <div class="body">
                            <ul class="nav nav-tabs tab-nav-right" role="tablist">
                                @*<li role="presentation" class="active"><a href="#a" data-toggle="tab" aria-expanded="true">SetMenu</a></li>
                                    <li role="presentation" class=""><a href="#b" data-toggle="tab" aria-expanded="false">SetMenu Detail</a></li>*@
                                <li role="presentation" class=""><a href="#viewDate" data-toggle="tab" aria-expanded="false">View</a></li>
                                @*<li role="presentation" class="active"><a href="#addDate" data-toggle="tab" aria-expanded="false">Add</a></li>*@

                            </ul>
                            <div class="tab-content">
                                <div role="tabpanel" class="tab-pane active" id="viewDate">
                                    @foreach (var i in udcdBrk)
                                    {
                                        <div class="row">
                                            <div class="col-sm-8">
                                                @{
                                                    int d = (int)i.Date.DayOfWeek;

                                                    int m = i.Date.Month;
                                                    var date = WeekDays.ElementAt(d) + "," + Months.ElementAt(m - 1) + " " + i.Date.Day + "," + i.Date.Year;

                                                }
                                                @date

                                            </div>
                                            <div class="col-sm-2">
                                                @{
                                                    var mealSt = @i.IsOrderSet == true ? "On" : "Off";

                                                }
                                                @mealSt
                                            </div>
                                            <div class="col-sm-2">
                                                <button onclick="deleteDate(@i.Id)" class="btn btn-success" style="padding:3px;">Delete</button>
                                            </div>
                                            @*<div class="col-sm-2">

                                                </div>*@
                                        </div>
                                    }
                                    @*<div class="row">
                                            <div class="col-sm-4">

                                            </div>
                                            <div class="col-sm-4">

                                            </div>
                                            <div class="col-sm-4">
                                                <button onclick="createMealDateInput(1, 'BRKDateSpace', 'BRKCheckBox','BRKCheckSpace','BRKButton','BRKButtonSpace','BRKMoreButton','BRKMoreButtonSpace')" rel="tooltip" class="btn">Add Date</button>

                                            </div>
                                        </div>*@
                                    <div class="row">
                                        <div class="col-sm-4" id="BRKDateSpace">
                                            @*<input type="text" id="datepicker5" name="datepicker" value="@from3" class="form-control col-sm-10" placeholder="From..">*@

                                        </div>
                                        <div class="col-sm-4" id="BRKMoreButtonSpace">
                                            @*<button onclick="createBRKDateInput()" rel="tooltip" class="btn"><i class="material-icons">edit</i>Add Date</button>*@

                                        </div>
                                        <div class="col-sm-4">

                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-4" id="BRKCheckSpace">

                                        </div>
                                        <div class="col-sm-4" id="BRKButtonSpace">

                                        </div>
                                        <div class="col-sm-4">

                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-4">

                                        </div>
                                        <div class="col-sm-4">

                                        </div>
                                        <div class="col-sm-4" id="initButtonBRK">
                                            <button onclick="createMealDateInput(1, 'BRKDateSpace', 'BRKCheckBox','BRKCheckSpace','BRKButton','BRKButtonSpace','BRKMoreButton','BRKMoreButtonSpace','initButtonBRK')" rel="tooltip" class="btn btn-success">Add More</button>

                                        </div>
                                    </div>
                                </div>
                                <div role="tabpanel" class="tab-pane" id="addDate">


                                    <div class="row">
                                        <div class="col-sm-4" id="BRKDateSpace">
                                            @*<input type="text" id="datepicker5" name="datepicker" value="@from3" class="form-control col-sm-10" placeholder="From..">*@

                                        </div>
                                        <div class="col-sm-4" id="BRKMoreButtonSpace">
                                            @*<button onclick="createBRKDateInput()" rel="tooltip" class="btn"><i class="material-icons">edit</i>Add Date</button>*@

                                        </div>
                                        <div class="col-sm-4">

                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-4" id="BRKCheckSpace">

                                        </div>
                                        <div class="col-sm-4" id="BRKButtonSpace">

                                        </div>
                                        <div class="col-sm-4">

                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-4">

                                        </div>
                                        <div class="col-sm-4">

                                        </div>
                                        <div class="col-sm-4">
                                            <button onclick="createMealDateInput(1, 'BRKDateSpace', 'BRKCheckBox','BRKCheckSpace','BRKButton','BRKButtonSpace','BRKMoreButton','BRKMoreButtonSpace')" rel="tooltip" class="btn btn-success">Add More</button>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            @*}*@
            @*@if (preSchedulePersonTBrk.IsPreOrderSet == true)
                {*@
            <div class="col-sm-4 ">
                <div class="card">
                    <div class="card-header-success" style="font-size:15px;">
                        On or Off your Teabreak for any specific date.

                    </div>
                    <div class="card-body">
                        <div class="body">
                            <ul class="nav nav-tabs tab-nav-right" role="tablist">
                                @*<li role="presentation" class="active"><a href="#a" data-toggle="tab" aria-expanded="true">SetMenu</a></li>
                                    <li role="presentation" class=""><a href="#b" data-toggle="tab" aria-expanded="false">SetMenu Detail</a></li>*@
                                <li role="presentation" class=""><a href="#viewDate2" data-toggle="tab" aria-expanded="false">View</a></li>
                                @*<li role="presentation" class="active"><a href="#addDate2" data-toggle="tab" aria-expanded="false">Add</a></li>*@

                            </ul>
                            <div class="tab-content">
                                <div role="tabpanel" class="tab-pane active" id="viewDate2">
                                    @foreach (var i in udcdTBrk)
                                    {
                                        <div class="row">
                                            <div class="col-sm-8">
                                                @{
                                                    int d = (int)i.Date.DayOfWeek;

                                                    int m = i.Date.Month;
                                                    var date = WeekDays.ElementAt(d) + "," + Months.ElementAt(m - 1) + " " + i.Date.Day + "," + i.Date.Year;

                                                }
                                                @date

                                            </div>
                                            <div class="col-sm-2">
                                                @{
                                                    var mealSt = @i.IsOrderSet == true ? "On" : "Off";

                                                }
                                                @mealSt
                                            </div>
                                            <div class="col-sm-2">
                                                <button onclick="deleteDate(@i.Id)" class="btn btn-success" style="padding:3px;">Delete</button>
                                            </div>
                                            @*<div class="col-sm-2">

                                                </div>*@
                                        </div>
                                    }


                                    <div class="row">
                                        <div class="col-sm-4" id="TBRKDateSpace">
                                            @*<input type="text" id="datepicker5" name="datepicker" value="@from3" class="form-control col-sm-10" placeholder="From..">*@

                                        </div>
                                        <div class="col-sm-4" id="TBRKMoreButtonSpace">
                                            @*<button onclick="createBRKDateInput()" rel="tooltip" class="btn"><i class="material-icons">edit</i>Add Date</button>*@

                                        </div>
                                        <div class="col-sm-4">

                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-4" id="TBRKCheckSpace">

                                        </div>
                                        <div class="col-sm-4" id="TBRKButtonSpace">

                                        </div>
                                        <div class="col-sm-4">

                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-4">

                                        </div>
                                        <div class="col-sm-4">

                                        </div>
                                        <div class="col-sm-4" id="initButtonTBRK">
                                            <button onclick="createMealDateInput(3, 'TBRKDateSpace', 'TBRKCheckBox','TBRKCheckSpace','TBRKButton','TBRKButtonSpace','TBRKMoreButton','TBRKMoreButtonSpace','initButtonTBRK')" rel="tooltip" class="btn btn-success">Add More</button>

                                        </div>
                                    </div>

                                </div>
                                <div role="tabpanel" class="tab-pane" id="addDate2">

                                    <div class="row">
                                        <div class="col-sm-4">

                                        </div>
                                        <div class="col-sm-4">

                                        </div>
                                        <div class="col-sm-4">
                                            <button onclick="createMealDateInput(3, 'TBRKDateSpace', 'TBRKCheckBox','TBRKCheckSpace','TBRKButton','TBRKButtonSpace','TBRKMoreButton','TBRKMoreButtonSpace')" rel="tooltip" class="btn">Add More</button>

                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-4" id="TBRKDateSpace">
                                            @*<input type="text" id="datepicker5" name="datepicker" value="@from3" class="form-control col-sm-10" placeholder="From..">*@

                                        </div>
                                        <div class="col-sm-4" id="TBRKMoreButtonSpace">
                                            @*<button onclick="createBRKDateInput()" rel="tooltip" class="btn"><i class="material-icons">edit</i>Add Date</button>*@

                                        </div>
                                        <div class="col-sm-4">

                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-4" id="TBRKCheckSpace">

                                        </div>
                                        <div class="col-sm-4" id="TBRKButtonSpace">

                                        </div>
                                        <div class="col-sm-4">

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            @*}*@
            @*@if (preSchedulePersonLnch.IsPreOrderSet == true)
                {*@
            <div class="col-sm-4">
                <div class="card">
                    <div class="card-header-success" style="font-size:15px;">
                        On or Off your Lunch for any specific date.

                    </div>
                    <div class="card-body">
                        <div class="body">
                            <ul class="nav nav-tabs tab-nav-right" role="tablist">
                                @*<li role="presentation" class="active"><a href="#a" data-toggle="tab" aria-expanded="true">SetMenu</a></li>
                                    <li role="presentation" class=""><a href="#b" data-toggle="tab" aria-expanded="false">SetMenu Detail</a></li>*@
                                <li role="presentation" class=""><a href="#viewDate3" data-toggle="tab" aria-expanded="false">View</a></li>
                                @*<li role="presentation" class="active"><a href="#addDate3" data-toggle="tab" aria-expanded="false">Add</a></li>*@

                            </ul>
                            <div class="tab-content">
                                <div role="tabpanel" class="tab-pane active" id="viewDate3">
                                    @foreach (var i in udcdLn)
                                    {
                                        <div class="row">
                                            <div class="col-sm-8">
                                                @{
                                                    int d = (int)i.Date.DayOfWeek;

                                                    int m = i.Date.Month;
                                                    var date = WeekDays.ElementAt(d) + "," + Months.ElementAt(m - 1) + " " + i.Date.Day + "," + i.Date.Year;

                                                }
                                                @date

                                            </div>
                                            <div class="col-sm-2">
                                                @{
                                                    var mealSt = @i.IsOrderSet == true ? "On" : "Off";

                                                }
                                                @mealSt
                                            </div>
                                            <div class="col-sm-2">
                                                <button onclick="deleteDate(@i.Id)" class="btn btn-success" style="padding:3px;">Delete</button>
                                            </div>
                                            @*<div class="col-sm-2">

                                                </div>*@
                                        </div>
                                    }


                                    <div class="row">
                                        <div class="col-sm-4" id="LnDateSpace">
                                            @*<input type="text" id="datepicker5" name="datepicker" value="@from3" class="form-control col-sm-10" placeholder="From..">*@

                                        </div>
                                        <div class="col-sm-4" id="LnMoreButtonSpace">
                                            @*<button onclick="createBRKDateInput()" rel="tooltip" class="btn"><i class="material-icons">edit</i>Add Date</button>*@

                                        </div>
                                        <div class="col-sm-4">

                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-4" id="LnCheckSpace">

                                        </div>
                                        <div class="col-sm-4" id="LnButtonSpace">

                                        </div>
                                        <div class="col-sm-4">

                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-4">

                                        </div>
                                        <div class="col-sm-4">

                                        </div>
                                        <div class="col-sm-4" id="initButtonLn">
                                            <button onclick="createMealDateInput(2, 'LnDateSpace', 'LnCheckBox','LnCheckSpace','LnButton','LnButtonSpace','LnMoreButton','LnMoreButtonSpace','initButtonLn')" rel="tooltip" class="btn btn-success">Add More</button>

                                        </div>
                                    </div>

                                </div>
                                <div role="tabpanel" class="tab-pane " id="addDate3">

                                    <div class="row">
                                        <div class="col-sm-4">

                                        </div>
                                        <div class="col-sm-4">

                                        </div>
                                        <div class="col-sm-4">
                                            <button onclick="createMealDateInput(2, 'LnDateSpace', 'LnCheckBox','LnCheckSpace','LnButton','LnButtonSpace','LnMoreButton','LnMoreButtonSpace')" rel="tooltip" class="btn btn-success">Add More</button>

                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-4" id="LnDateSpace">
                                            @*<input type="text" id="datepicker5" name="datepicker" value="@from3" class="form-control col-sm-10" placeholder="From..">*@

                                        </div>
                                        <div class="col-sm-4" id="LnMoreButtonSpace">
                                            @*<button onclick="createBRKDateInput()" rel="tooltip" class="btn"><i class="material-icons">edit</i>Add Date</button>*@

                                        </div>
                                        <div class="col-sm-4">

                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-4" id="LnCheckSpace">

                                        </div>
                                        <div class="col-sm-4" id="LnButtonSpace">

                                        </div>
                                        <div class="col-sm-4">

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            @*}*@

        </div>
        @*New Date Concept from BUP-----------------------------------------*@

        <div class="card" style="display:none;">
            <div class=" card-header-tabs card-header-success" style="padding-top:5px;height:60px;">
                <div class="col-sm-4">
                    @if (!string.IsNullOrEmpty(errorMessage))
                    {
                        <span class="badge badge-danger" style="font-size:12px;margin-right:30px;line-height:2;vertical-align:middle;">

                            @errorMessage

                        </span>
                    }
                </div>
                <div class="col-sm-4">


                </div>
                <div class="col-sm-4">
                    <form id="FetchMenu" asp-action="FetchMenu" asp-controller="Consumer" method="post">
                        @*<div class="input-group no-border">*@
                        <input type="text" id="menudate" name="menudate" value="@showdate" class="form-control col-sm-10" placeholder="Search...." required>
                        <button type="submit" class="btn btn-white btn-round btn-just-icon">
                            <i class="material-icons">search</i>
                            <div class="ripple-container"></div>
                        </button>
                        @*</div>*@

                    </form>
                </div>
            </div>
            <div class="card-body">

                <div class="row clearfix">
                    <!-- Visitors -->
                    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
                        <div class="card">
                            <div class="body">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-12 col-md-6 col-md-6"><div class="font-bold m-b--35">BREAKFAST</div></div>


                                </div>
                            </div>
                            <div class="body">
                                <!-- Nav tabs -->
                                <ul class="nav nav-tabs tab-nav-right" role="tablist">
                                    @*<li role="presentation" class="active"><a href="#a" data-toggle="tab" aria-expanded="true">SetMenu</a></li>
                                        <li role="presentation" class=""><a href="#b" data-toggle="tab" aria-expanded="false">SetMenu Detail</a></li>*@
                                    <li role="presentation" class=""><a href="#c" data-toggle="tab" aria-expanded="false">Item</a></li>
                                </ul>

                                <!-- Tab panes -->
                                <div class="tab-content">
                                    <div role="tabpanel" class="tab-pane" id="a">
                                        @if (showmenu == true)
                                        {

                                            var smSetUp = _db.CustomerChoiceV2.Where(x => x.MealTypeId == 1 && x.Date.ToShortDateString() == SMDate && x.UserId == UserId && x.OrderTypeId == 1).FirstOrDefault();
                                            var smName = "";
                                            var smId = "";

                                            if (SetMenuListBrk.Count > 0)
                                            {
                                                if (smSetUp != null)
                                                {
                                                    smName = SetMenuListBrk[smSetUp.SetMenuId.ToString()];
                                                    smId = smSetUp.Id.ToString();

                                                }
                                                else
                                                {
                                                    smName = SetMenuListBrk.Values.ElementAt(0);
                                                    smId = SetMenuListBrk.Keys.ElementAt(0);
                                                }
                                            }



                                            @if (SetMenuListBrk.Count > 0)
                                            {
                                                <div class="jumbotron" style="padding-bottom:10px;padding-left:10px;padding-right:10px;padding-top:10px;">
                                                    <form asp-action="EditDefaultChoice" asp-controller="Consumer" style="padding-bottom:0px;" asp-route-MealId="1" asp-route-dateString="@SMDate" method="post">
                                                        <div class="row" style="padding-top:5px;">
                                                            <div class="col-sm-4" style="padding-top:5px;font-size:15px;font-weight:bold;">
                                                                Regular
                                                            </div>
                                                            <div class="col-sm-5" style="padding-left:0px;">

                                                                <select id="setmenu" name="setmenu" class="form-control border-radius-none" asp-items="@(new SelectList(SetMenuListBrk.Prepend(new KeyValuePair<string, string>(smId, smName)), "Key", "Value", ""))"></select>
                                                            </div>

                                                            <div class="col-sm-3">
                                                                <button type="submit" rel="tooltip" class="btn"><i class="material-icons">edit</i></button>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>



                                            }
                                            else
                                            {
                                                <p>No Set Menu is available for @SMDate in Breakfast  </p>
                                            }

                                            @if (SetMenuListBrk.Count > 0)
                                            {
                                                <div class="jumbotron" style="padding-bottom:0px;padding-left:10px;padding-right:10px;padding-top:10px;">


                                                    <form asp-action="EditExtraSMChoice" asp-controller="Consumer" asp-route-MealId="1" asp-route-dateString="@SMDate" method="post">
                                                        <div class="row">
                                                            <div class="col-sm-2" style="padding-right:0px;padding-top:15px;font-size:15px;font-weight:bold;">
                                                                Extra
                                                            </div>
                                                            <div class="col-sm-4" style="padding-top:10px;padding-right:0px;">

                                                                <select id="exsetmenu" name="exsetmenu" class="form-control border-radius-none col-sm-10" asp-items="@(new SelectList(SetMenuListBrk.Prepend(new KeyValuePair<string, string>("-1", "SetMenu")), "Key", "Value", ""))"></select>
                                                            </div>
                                                            <div class="col-sm-3" style="padding-right:0px;padding-left:0px;">


                                                                <input type="number" id="EsmBrkQ" name="EsmBrkQ" class="form-control col-sm-8" min="1" placeholder="Quantity" required>
                                                            </div>
                                                            <div class="col-sm-1" style="padding-top:6px;padding-right:0px;">

                                                                <button type="submit" rel="tooltip" class="btn"><i class="material-icons">add</i></button>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>

                                            }

                                            {
                                                var cesmr = _db.CustomerChoiceV2.Where(x => x.OrderTypeId == 3 && x.Date.ToShortDateString() == SMDate && x.MealTypeId == 1 && x.UserId == UserId).ToList();

                                                if (cesmr.Count > 0)
                                                {

                                                    <div class="jumbotron" style="padding-bottom:0px;padding-left:10px;padding-right:10px;padding-top:10px;">
                                                        @for (var i = 0; i < SetMenuListBrk.Count; i++)
                                                        {
                                                            var sl = i + 1;
                                                            var smid = long.Parse(SetMenuListBrk.Keys.ElementAt(i));
                                                            var smcount = cesmr.Where(x => x.SetMenuId == long.Parse(SetMenuListBrk.Keys.ElementAt(i))).FirstOrDefault();
                                                            <span>SetMenu @sl  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; @smcount.quantity pcs </span>

                                                        }



                                                    </div>
                                                }



                                            }




                                        }





                                        else
                                        {
                                            <div class="jumbotron" style="padding-bottom:10px;padding-left:10px;padding-right:10px;padding-top:10px;">
                                                Meal Off

                                            </div>
                                        }


                                    </div>

                                    <div role="tabpanel" class="tab-pane " id="b">
                                        @foreach (var itm in STMBrk)
                                        {
                                            var stmBrkDtl = _db.SetMenuDetails.Where(x => x.SetMenuId == itm.SetMenuId).ToList();
                                            int j = 1;
                                            <div class="col-sm-4">
                                                SetMenu @j
                                            </div>
                                            <div class="col-sm-8">
                                                @foreach (var i in stmBrkDtl)
                                                {
                                                    @_db.StoreOutItem.Where(x => x.Id == i.StoreOutItemId).FirstOrDefault().Name <span>&nbsp;</span>

                                                }
                                            </div>

                                        }

                                    </div>
                                    <div role="tabpanel" class="tab-pane active in" id="c">
                                        @{
                                            var ExItemBrk = _db.MenuItem.Where(x => x.MealTypeId == 1 && x.Day == day).ToList();


                                        }

                                        @if (showmenu == true)
                                        {

                                            Boolean c = true;

                                            var ExItemBrkFromCustomerChoiceV2 = _db.CustomerChoiceV2.Where(x => x.MealTypeId == 1 && x.OrderTypeId == 4 && x.Date.ToShortDateString() == SMDate && x.UserId == UserId).ToList();


                                            if (SetMenuListBrk.Count > 0 && ExItemBrkFromCustomerChoiceV2.Count == 0)
                                            {
                                                @foreach (var item in ExItemBrk)
                                                {
                                                    @*<div class="row">*@

                                                    <div class="col-sm-2">
                                                        <div class="form-check">
                                                            <label class="form-check-label">
                                                                <input class="form-check-input" name="itemcheck" type="checkbox" value="@item.Id" unchecked>
                                                                <span class="form-check-sign">
                                                                    <span class="check"></span>
                                                                </span>
                                                            </label>
                                                        </div>
                                                    </div>

                                                    <div class="col-sm-4" style="padding-top:20px;">
                                                        @{
                                                            var ex = _db.ExtraItem.Where(x => x.Id == item.ExtraItemId).FirstOrDefault();

                                                        }
                                                        @_db.StoreOutItem.Where(x => x.Id == ex.StoreOutItemId).FirstOrDefault().Name
                                                    </div>

                                                    <div class="col-sm-6" style="padding-top:6px;">
                                                        <input type="number" id="EitmBrkQ" name="EitmBrkQ" class="form-control col-sm-5" value="" placeholder="Quantity">

                                                    </div>

                                                    @*</div>*@
                                                }
                                                @*<div class="row">*@
                                                <div class="col-sm-4">

                                                </div>

                                                <div class="col-sm-4">

                                                </div>
                                                <div class="col-sm-4">
                                                    <button onclick="ExtraItemUpdate(1)" class="btn bg-pink waves-effect">Order</button>

                                                </div>


                                                @*</div>*@
                                            }
                                            else
                                            {

                                                @if (ExItemBrkFromCustomerChoiceV2.Count == 0)
                                                {

                                                    @*@if(SetMenuListBrk.Count == 0)
                                                        {*@
                                                    @foreach (var item in ExItemBrk)
                                                    {
                                                        @*<div class="row">*@

                                                        <div class="col-sm-2">
                                                            <div class="form-check">
                                                                <label class="form-check-label">
                                                                    <input class="form-check-input" name="itemcheck" type="checkbox" value="@item.Id" checked>
                                                                    <span class="form-check-sign">
                                                                        <span class="check"></span>
                                                                    </span>
                                                                </label>
                                                            </div>
                                                        </div>

                                                        <div class="col-sm-4" style="padding-top:20px;">
                                                            @{
                                                                var ex = _db.ExtraItem.Where(x => x.Id == item.ExtraItemId).FirstOrDefault();

                                                            }
                                                            @_db.StoreOutItem.Where(x => x.Id == ex.StoreOutItemId).FirstOrDefault().Name
                                                        </div>

                                                        <div class="col-sm-6" style="padding-top:6px;">
                                                            <input type="number" id="EitmBrkQ" name="EitmBrkQ" class="form-control col-sm-5" value="1" placeholder="Quantity">

                                                        </div>
                                                        @*</div>*@
                                                    }
                                                    @*<div class="row">*@
                                                    <div class="col-sm-4">

                                                    </div>

                                                    <div class="col-sm-4">

                                                    </div>
                                                    <div class="col-sm-4">
                                                        <button onclick="ExtraItemUpdate(1)" class="btn bg-pink waves-effect">Order</button>

                                                    </div>


                                                    @*</div>*@

                                                }
                                                else
                                                {

                                                    double q = 0;
                                                    @foreach (var item in ExItemBrk)
                                                    {
                                                        int ct = 0;
                                                        foreach (var i in ExItemBrkFromCustomerChoiceV2)
                                                        {

                                                            if (item.ExtraItemId == i.ExtraItemId)
                                                            {
                                                                ct = 1;
                                                                q = i.quantity;
                                                                break;
                                                            }

                                                        }
                                                        if (ct == 1)
                                                        {
                                                            @*<div class="row">*@

                                                            <div class="col-sm-2">
                                                                <div class="form-check">
                                                                    <label class="form-check-label">
                                                                        <input class="form-check-input" name="itemcheck" type="checkbox" value="@item.Id" checked>
                                                                        <span class="form-check-sign">
                                                                            <span class="check"></span>
                                                                        </span>
                                                                    </label>
                                                                </div>
                                                            </div>

                                                            <div class="col-sm-4" style="padding-top:20px;">
                                                                @{
                                                                    var ex = _db.ExtraItem.Where(x => x.Id == item.ExtraItemId).FirstOrDefault();

                                                                }
                                                                @_db.StoreOutItem.Where(x => x.Id == ex.StoreOutItemId).FirstOrDefault().Name
                                                            </div>

                                                            <div class="col-sm-6" style="padding-top:6px;">
                                                                <input type="number" id="EitmBrkQ" name="EitmBrkQ" class="form-control col-sm-5" value="@q" placeholder="Quantity">

                                                            </div>

                                                            @*</div>*@
                                                        }
                                                        else
                                                        {
                                                            @*<div class="row">*@

                                                            <div class="col-sm-2">
                                                                <div class="form-check">
                                                                    <label class="form-check-label">
                                                                        <input class="form-check-input" name="itemcheck" type="checkbox" value="@item.Id" unchecked>
                                                                        <span class="form-check-sign">
                                                                            <span class="check"></span>
                                                                        </span>
                                                                    </label>
                                                                </div>
                                                            </div>

                                                            <div class="col-sm-4" style="padding-top:20px;">
                                                                @{
                                                                    var ex = _db.ExtraItem.Where(x => x.Id == item.ExtraItemId).FirstOrDefault();

                                                                }
                                                                @_db.StoreOutItem.Where(x => x.Id == ex.StoreOutItemId).FirstOrDefault().Name
                                                            </div>

                                                            <div class="col-sm-6" style="padding-top:6px;">
                                                                <input type="number" id="EitmBrkQ" name="EitmBrkQ" class="form-control col-sm-5" value="" placeholder="Quantity">

                                                            </div>

                                                            @*</div>*@

                                                        }
                                                    }
                                                    @*<div class="row">*@
                                                    <div class="col-sm-4">

                                                    </div>

                                                    <div class="col-sm-4">

                                                    </div>
                                                    <div class="col-sm-4">
                                                        <button onclick="ExtraItemUpdate(1)" class="btn bg-pink waves-effect">Order</button>

                                                    </div>



                                                }
                                            }


                                        }
                                        else
                                        {
                                            @foreach (var item in ExItemBrk)
                                            {
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                    </div>
                                                    <div class="col-sm-4">
                                                        @{
                                                            var ex = _db.ExtraItem.Where(x => x.Id == item.ExtraItemId).FirstOrDefault();

                                                        }
                                                        @_db.StoreOutItem.Where(x => x.Id == ex.StoreOutItemId).FirstOrDefault().Name
                                                    </div>
                                                    <div class="col-sm-4">
                                                    </div>
                                                </div>

                                            }
                                            <div class="row">
                                                You can just view,can't choose extra item.As Meal is Off.
                                            </div>
                                        }


                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <!-- #END# Visitors -->
                    <!-- Visitors -->
                    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
                        <div class="card">
                            <div class="body">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-12 col-md-6 col-md-6"><div class="font-bold m-b--35">Teabreak</div></div>


                                </div>
                            </div>
                            <div class="body">
                                <!-- Nav tabs -->
                                <ul class="nav nav-tabs tab-nav-right" role="tablist">
                                    @*<li role="presentation" class="active"><a href="#x" data-toggle="tab" aria-expanded="true">SetMenu</a></li>
                                        <li role="presentation" class=""><a href="#y" data-toggle="tab" aria-expanded="false">SetMenu Detail</a></li>*@
                                    <li role="presentation" class=""><a href="#z" data-toggle="tab" aria-expanded="false">Item</a></li>
                                </ul>

                                <!-- Tab panes -->
                                <div class="tab-content">
                                    <div role="tabpanel" class="tab-pane" id="x">
                                        @if (showmenu3 == true)
                                        {
                                            var smSetUpT = _db.CustomerChoiceV2.Where(x => x.MealTypeId == 3 && x.Date.ToShortDateString() == SMDate && x.UserId == UserId && x.OrderTypeId == 1).FirstOrDefault();
                                            var smNameT = "";
                                            var smIdT = "";

                                            if (SetMenuListTea.Count > 0)
                                            {
                                                if (smSetUpT != null)
                                                {
                                                    smNameT = SetMenuListTea[smSetUpT.SetMenuId.ToString()];
                                                    smIdT = smSetUpT.Id.ToString();

                                                }
                                                else
                                                {
                                                    smNameT = SetMenuListTea.Values.ElementAt(0);
                                                    smIdT = SetMenuListTea.Keys.ElementAt(0);
                                                }
                                            }



                                            @if (SetMenuListTea.Count > 0)
                                            {
                                                <div class="jumbotron" style="padding-bottom:10px;padding-left:10px;padding-right:10px;padding-top:10px;">
                                                    <form asp-action="EditDefaultChoice" asp-controller="Consumer" style="padding-bottom:0px;" asp-route-MealId="3" asp-route-dateString="@SMDate" method="post">
                                                        <div class="row" style="padding-top:5px;">
                                                            <div class="col-sm-4" style="padding-top:5px;font-size:15px;font-weight:bold;">
                                                                Regular
                                                            </div>
                                                            <div class="col-sm-5" style="padding-left:0px;">

                                                                <select id="setmenu3" name="setmenu3" class="form-control border-radius-none" asp-items="@(new SelectList(SetMenuListTea.Prepend(new KeyValuePair<string, string>(smIdT, smNameT)), "Key", "Value", ""))"></select>
                                                            </div>

                                                            <div class="col-sm-3">
                                                                <button type="submit" rel="tooltip" class="btn"><i class="material-icons">edit</i></button>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>



                                            }
                                            else
                                            {
                                                <p>No Set Menu is available for @SMDate in Teabreak  </p>
                                            }

                                            @if (SetMenuListTea.Count > 0)
                                            {
                                                <div class="jumbotron" style="padding-bottom:0px;padding-left:10px;padding-right:10px;padding-top:10px;">


                                                    <form asp-action="EditExtraSMChoice" asp-controller="Consumer" asp-route-MealId="3" asp-route-dateString="@SMDate" method="post">
                                                        <div class="row">
                                                            <div class="col-sm-2" style="padding-right:0px;padding-top:15px;font-size:15px;font-weight:bold;">
                                                                Extra
                                                            </div>
                                                            <div class="col-sm-4" style="padding-top:10px;padding-right:0px;">

                                                                <select id="exsetmenu3" name="exsetmenu3" class="form-control border-radius-none col-sm-10" asp-items="@(new SelectList(SetMenuListTea.Prepend(new KeyValuePair<string, string>("-1", "SetMenu")), "Key", "Value", ""))"></select>
                                                            </div>
                                                            <div class="col-sm-3" style="padding-right:0px;padding-left:0px;">


                                                                <input type="number" id="EsmTQ" name="EsmTQ" min="1" class="form-control col-sm-8" placeholder="Quantity" required>
                                                            </div>
                                                            <div class="col-sm-1" style="padding-top:6px;padding-right:0px;">

                                                                <button type="submit" rel="tooltip" class="btn"><i class="material-icons">add</i></button>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>

                                            }
                                            {
                                                var cesmr = _db.CustomerChoiceV2.Where(x => x.OrderTypeId == 3 && x.Date.ToShortDateString() == SMDate && x.MealTypeId == 3 && x.UserId == UserId).ToList();

                                                if (cesmr.Count > 0)
                                                {

                                                    <div class="jumbotron" style="padding-bottom:0px;padding-left:10px;padding-right:10px;padding-top:10px;">
                                                        @for (var i = 0; i < SetMenuListTea.Count; i++)
                                                        {
                                                            var sl = i + 1;
                                                            var smid = long.Parse(SetMenuListTea.Keys.ElementAt(i));
                                                            var smcount = cesmr.Where(x => x.SetMenuId == long.Parse(SetMenuListTea.Keys.ElementAt(i))).FirstOrDefault();
                                                            <span>SetMenu @sl  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; @smcount.quantity pcs </span>

                                                        }



                                                    </div>
                                                }



                                            }
                                        }
                                        else
                                        {
                                            <div class="jumbotron" style="padding-bottom:0px;padding-left:10px;padding-right:10px;padding-top:10px;">
                                                Meal is Off.
                                            </div>

                                        }






                                    </div>

                                    <div role="tabpanel" class="tab-pane" id="y">
                                        @foreach (var itm in STMTBreak)
                                        {
                                            var stmTBrkDtl = _db.SetMenuDetails.Where(x => x.SetMenuId == itm.SetMenuId).ToList();
                                            int j = 1;
                                            <div class="col-sm-4">
                                                SetMenu @j
                                            </div>
                                            <div class="col-sm-8">
                                                @foreach (var i in stmTBrkDtl)
                                                {
                                                    @_db.StoreOutItem.Where(x => x.Id == i.StoreOutItemId).FirstOrDefault().Name <span>&nbsp;</span>

                                                }
                                            </div>

                                        }


                                    </div>
                                    <div role="tabpanel" class="tab-pane active in" id="z">
                                        @{
                                            var ExItemT = _db.MenuItem.Where(x => x.MealTypeId == 3 && x.Day == day).ToList();


                                        }
                                        @if (showmenu3 == true)
                                        {
                                            var ExItemTFromCustomerChoiceV2 = _db.CustomerChoiceV2.Where(x => x.MealTypeId == 3 && x.OrderTypeId == 4 && x.Date.ToShortDateString() == SMDate && x.UserId == UserId).ToList();



                                            @if (SetMenuListTea.Count > 0 && ExItemTFromCustomerChoiceV2.Count == 0)
                                            {
                                                @foreach (var item in ExItemT)
                                                {
                                                    <div class="col-sm-2">
                                                        <div class="form-check">
                                                            <label class="form-check-label">
                                                                <input class="form-check-input" name="itemcheck3" type="checkbox" value="@item.Id" unchecked>
                                                                <span class="form-check-sign">
                                                                    <span class="check"></span>
                                                                </span>
                                                            </label>
                                                        </div>
                                                    </div>

                                                    <div class="col-sm-4" style="padding-top:20px;">
                                                        @{
                                                            var ex = _db.ExtraItem.Where(x => x.Id == item.ExtraItemId).FirstOrDefault();

                                                        }
                                                        @_db.StoreOutItem.Where(x => x.Id == ex.StoreOutItemId).FirstOrDefault().Name
                                                    </div>

                                                    <div class="col-sm-6" style="padding-top:6px;">
                                                        <input type="number" id="EitmTQ" name="EitmTQ" class="form-control col-sm-5" value="" placeholder="Quantity">

                                                    </div>
                                                }
                                                @*<div class="row">*@
                                                <div class="col-sm-4">

                                                </div>

                                                <div class="col-sm-4">

                                                </div>
                                                <div class="col-sm-4">
                                                    <button onclick="ExtraItemUpdate(3)" class="btn bg-pink waves-effect">Order</button>

                                                </div>


                                                @*</div>*@
                                            }
                                            else
                                            {

                                                @if (ExItemTFromCustomerChoiceV2.Count == 0)
                                                {

                                                    @*@if(SetMenuListBrk.Count == 0)
                                                        {*@
                                                    @foreach (var item in ExItemT)
                                                    {
                                                        <div class="col-sm-2">
                                                            <div class="form-check">
                                                                <label class="form-check-label">
                                                                    <input class="form-check-input" name="itemcheck3" type="checkbox" value="@item.Id" checked>
                                                                    <span class="form-check-sign">
                                                                        <span class="check"></span>
                                                                    </span>
                                                                </label>
                                                            </div>
                                                        </div>

                                                        <div class="col-sm-4" style="padding-top:20px;">
                                                            @{
                                                                var ex = _db.ExtraItem.Where(x => x.Id == item.ExtraItemId).FirstOrDefault();

                                                            }
                                                            @_db.StoreOutItem.Where(x => x.Id == ex.StoreOutItemId).FirstOrDefault().Name
                                                        </div>

                                                        <div class="col-sm-6" style="padding-top:6px;">
                                                            <input type="number" id="EitmTQ" name="EitmTQ" class="form-control col-sm-5" value="1" placeholder="Quantity">

                                                        </div>
                                                    }
                                                    @*<div class="row">*@
                                                    <div class="col-sm-4">

                                                    </div>

                                                    <div class="col-sm-4">

                                                    </div>
                                                    <div class="col-sm-4">
                                                        <button onclick="ExtraItemUpdate(3)" class="btn bg-pink waves-effect">Order</button>

                                                    </div>


                                                    @*</div>*@

                                                }
                                                else
                                                {

                                                    double q = 0;
                                                    @foreach (var item in ExItemT)
                                                    {
                                                        int ct = 0;
                                                        foreach (var i in ExItemTFromCustomerChoiceV2)
                                                        {

                                                            if (item.ExtraItemId == i.ExtraItemId)
                                                            {
                                                                ct = 1;
                                                                q = i.quantity;
                                                                break;
                                                            }

                                                        }
                                                        if (ct == 1)
                                                        {
                                                            <div class="col-sm-2">
                                                                <div class="form-check">
                                                                    <label class="form-check-label">
                                                                        <input class="form-check-input" name="itemcheck3" type="checkbox" value="@item.Id" checked>
                                                                        <span class="form-check-sign">
                                                                            <span class="check"></span>
                                                                        </span>
                                                                    </label>
                                                                </div>
                                                            </div>

                                                            <div class="col-sm-4" style="padding-top:20px;">
                                                                @{
                                                                    var ex = _db.ExtraItem.Where(x => x.Id == item.ExtraItemId).FirstOrDefault();

                                                                }
                                                                @_db.StoreOutItem.Where(x => x.Id == ex.StoreOutItemId).FirstOrDefault().Name
                                                            </div>

                                                            <div class="col-sm-6" style="padding-top:6px;">
                                                                <input type="number" id="EitmTQ" name="EitmTQ" class="form-control col-sm-5" value="@q" placeholder="Quantity">

                                                            </div>
                                                        }
                                                        else
                                                        {
                                                            <div class="col-sm-2">
                                                                <div class="form-check">
                                                                    <label class="form-check-label">
                                                                        <input class="form-check-input" name="itemcheck3" type="checkbox" value="@item.Id" unchecked>
                                                                        <span class="form-check-sign">
                                                                            <span class="check"></span>
                                                                        </span>
                                                                    </label>
                                                                </div>
                                                            </div>

                                                            <div class="col-sm-4" style="padding-top:20px;">
                                                                @{
                                                                    var ex = _db.ExtraItem.Where(x => x.Id == item.ExtraItemId).FirstOrDefault();

                                                                }
                                                                @_db.StoreOutItem.Where(x => x.Id == ex.StoreOutItemId).FirstOrDefault().Name
                                                            </div>

                                                            <div class="col-sm-6" style="padding-top:6px;">
                                                                <input type="number" id="EitmTQ" name="EitmTQ" class="form-control col-sm-5" value="" placeholder="Quantity">

                                                            </div>

                                                        }
                                                    }
                                                    <div class="col-sm-4">

                                                    </div>

                                                    <div class="col-sm-4">

                                                    </div>
                                                    <div class="col-sm-4">
                                                        <button onclick="ExtraItemUpdate(3)" class="btn bg-pink waves-effect">Order</button>

                                                    </div>



                                                }
                                            }
                                        }
                                        else
                                        {
                                            @foreach (var item in ExItemT)
                                            {
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                    </div>
                                                    <div class="col-sm-4">
                                                        @{
                                                            var ex = _db.ExtraItem.Where(x => x.Id == item.ExtraItemId).FirstOrDefault();

                                                        }
                                                        @_db.StoreOutItem.Where(x => x.Id == ex.StoreOutItemId).FirstOrDefault().Name
                                                    </div>
                                                    <div class="col-sm-4">
                                                    </div>
                                                </div>

                                            }
                                            <div class="row">
                                                You can just view,can't choose extra item.As Meal is Off.
                                            </div>
                                        }



                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>


                    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
                        <div class="card">
                            <div class="body">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-12 col-md-6 col-md-6"><div class="font-bold m-b--35">Lunch</div></div>


                                </div>
                            </div>
                            <div class="body">
                                <!-- Nav tabs -->
                                <ul class="nav nav-tabs tab-nav-right" role="tablist">
                                    @*<li role="presentation" class="active"><a href="#d" data-toggle="tab" aria-expanded="true">SetMenu</a></li>
                                        <li role="presentation" class=""><a href="#e" data-toggle="tab" aria-expanded="false">SetMenu Detail</a></li>*@
                                    <li role="presentation" class=""><a href="#f" data-toggle="tab" aria-expanded="false">Item</a></li>
                                </ul>

                                <!-- Tab panes -->
                                <div class="tab-content">
                                    <div role="tabpanel" class="tab-pane" id="d">
                                        @if (showmenu2 == true)
                                        {
                                            var smSetUplnc = _db.CustomerChoiceV2.Where(x => x.MealTypeId == 2 && x.Date.ToShortDateString() == SMDate && x.UserId == UserId && x.OrderTypeId == 1).FirstOrDefault();
                                            var smNamelnc = "";
                                            var smIdlnc = "";

                                            if (SetMenuListLn.Count > 0)
                                            {
                                                if (smSetUplnc != null)
                                                {
                                                    smNamelnc = SetMenuListLn[smSetUplnc.SetMenuId.ToString()];
                                                    smIdlnc = smSetUplnc.Id.ToString();

                                                }
                                                else
                                                {
                                                    smNamelnc = SetMenuListLn.Values.ElementAt(0);
                                                    smIdlnc = SetMenuListLn.Keys.ElementAt(0);
                                                }
                                            }



                                            @if (SetMenuListLn.Count > 0)
                                            {
                                                <div class="jumbotron" style="padding-bottom:10px;padding-left:10px;padding-right:10px;padding-top:10px;">
                                                    <form asp-action="EditDefaultChoice" asp-controller="Consumer" style="padding-bottom:0px;" asp-route-MealId="2" asp-route-dateString="@SMDate" method="post">
                                                        <div class="row" style="padding-top:5px;">
                                                            <div class="col-sm-4" style="padding-top:5px;font-size:15px;font-weight:bold;">
                                                                Regular
                                                            </div>
                                                            <div class="col-sm-5" style="padding-left:0px;">

                                                                <select id="setmenu2" name="setmenu2" class="form-control border-radius-none" asp-items="@(new SelectList(SetMenuListLn.Prepend(new KeyValuePair<string, string>(smIdlnc, smNamelnc)), "Key", "Value", ""))"></select>
                                                            </div>

                                                            <div class="col-sm-3">
                                                                <button type="submit" rel="tooltip" class="btn"><i class="material-icons">edit</i></button>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>



                                            }
                                            else
                                            {
                                                <p>No Set Menu is available for @SMDate in Lunch  </p>
                                            }
                                            @if (SetMenuListLn.Count > 0)
                                            {
                                                <div class="jumbotron" style="padding-bottom:0px;padding-left:10px;padding-right:10px;padding-top:10px;">


                                                    <form asp-action="EditExtraSMChoice" asp-controller="Consumer" asp-route-MealId="2" asp-route-dateString="@SMDate" method="post">
                                                        <div class="row">
                                                            <div class="col-sm-2" style="padding-right:0px;padding-top:15px;font-size:15px;font-weight:bold;">
                                                                Extra
                                                            </div>
                                                            <div class="col-sm-4" style="padding-top:10px;padding-right:0px;">

                                                                <select id="exsetmenu2" name="exsetmenu2" class="form-control border-radius-none col-sm-10" asp-items="@(new SelectList(SetMenuListLn.Prepend(new KeyValuePair<string, string>("-1", "SetMenu")), "Key", "Value", ""))"></select>
                                                            </div>
                                                            <div class="col-sm-3" style="padding-right:0px;padding-left:0px;">


                                                                <input type="number" id="EsmLnQ" name="EsmLnQ" class="form-control col-sm-8" min="1" placeholder="Quantity" required>
                                                            </div>
                                                            <div class="col-sm-1" style="padding-top:6px;padding-right:0px;">

                                                                <button type="submit" rel="tooltip" class="btn"><i class="material-icons">add</i></button>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>

                                            }
                                            {
                                                var cesmr = _db.CustomerChoiceV2.Where(x => x.OrderTypeId == 3 && x.Date.ToShortDateString() == SMDate && x.MealTypeId == 2 && x.UserId == UserId).ToList();

                                                if (cesmr.Count > 0)
                                                {

                                                    <div class="jumbotron" style="padding-bottom:0px;padding-left:10px;padding-right:10px;padding-top:10px;">
                                                        @for (var i = 0; i < SetMenuListLn.Count; i++)
                                                        {
                                                            var sl = i + 1;
                                                            var smid = long.Parse(SetMenuListLn.Keys.ElementAt(i));
                                                            var smcount = cesmr.Where(x => x.SetMenuId == long.Parse(SetMenuListLn.Keys.ElementAt(i))).FirstOrDefault();
                                                            <span>SetMenu @sl  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; @smcount.quantity pcs </span>

                                                        }



                                                    </div>
                                                }



                                            }
                                        }
                                        else
                                        {
                                            <div class="jumbotron" style="padding-bottom:10px;padding-left:10px;padding-right:10px;padding-top:10px;">
                                                Meal Off
                                            </div>
                                        }




                                    </div>

                                    <div role="tabpanel" class="tab-pane" id="e">
                                        @foreach (var itm in STMLnch)
                                        {
                                            var stmLnchDtl = _db.SetMenuDetails.Where(x => x.SetMenuId == itm.SetMenuId).ToList();
                                            int j = 1;
                                            <div class="col-sm-4">
                                                SetMenu @j
                                            </div>
                                            <div class="col-sm-8">
                                                @foreach (var i in stmLnchDtl)
                                                {
                                                    @_db.StoreOutItem.Where(x => x.Id == i.StoreOutItemId).FirstOrDefault().Name <span>&nbsp;</span>

                                                }
                                            </div>

                                        }

                                    </div>
                                    <div role="tabpanel" class="tab-pane active in" id="f">
                                        @{
                                            var ExItemLn = _db.MenuItem.Where(x => x.MealTypeId == 2 && x.Day == day).ToList();

                                        }

                                        @if (showmenu2 == true)
                                        {
                                            var ExItemLnFromCustomerChoiceV2 = _db.CustomerChoiceV2.Where(x => x.MealTypeId == 2 && x.OrderTypeId == 4 && x.Date.ToShortDateString() == OrderDate.ToShortDateString() && x.UserId == UserId).ToList();



                                            @if (SetMenuListLn.Count > 0 && ExItemLnFromCustomerChoiceV2.Count == 0)
                                            {
                                                @foreach (var item in ExItemLn)
                                                {
                                                    <div class="col-sm-2">
                                                        <div class="form-check">
                                                            <label class="form-check-label">
                                                                <input class="form-check-input" name="itemcheck2" type="checkbox" value="@item.Id" unchecked>
                                                                <span class="form-check-sign">
                                                                    <span class="check"></span>
                                                                </span>
                                                            </label>
                                                        </div>
                                                    </div>

                                                    <div class="col-sm-4" style="padding-top:20px;">
                                                        @{
                                                            var ex = _db.ExtraItem.Where(x => x.Id == item.ExtraItemId).FirstOrDefault();

                                                        }
                                                        @_db.StoreOutItem.Where(x => x.Id == ex.StoreOutItemId).FirstOrDefault().Name
                                                    </div>

                                                    <div class="col-sm-6" style="padding-top:6px;">
                                                        <input type="number" id="EitmLnQ" name="EitmLnQ" class="form-control col-sm-5" value="" placeholder="Quantity">

                                                    </div>
                                                }
                                                @*<div class="row">*@
                                                <div class="col-sm-4">

                                                </div>

                                                <div class="col-sm-4">

                                                </div>
                                                <div class="col-sm-4">
                                                    <button onclick="ExtraItemUpdate(2)" class="btn bg-pink waves-effect">Order</button>

                                                </div>


                                                @*</div>*@
                                            }
                                            else
                                            {

                                                @if (ExItemLnFromCustomerChoiceV2.Count == 0)
                                                {

                                                    @*@if(SetMenuListBrk.Count == 0)
                                                        {*@
                                                    @foreach (var item in ExItemLn)
                                                    {
                                                        <div class="col-sm-2">
                                                            <div class="form-check">
                                                                <label class="form-check-label">
                                                                    <input class="form-check-input" name="itemcheck2" type="checkbox" value="@item.Id" checked>
                                                                    <span class="form-check-sign">
                                                                        <span class="check"></span>
                                                                    </span>
                                                                </label>
                                                            </div>
                                                        </div>

                                                        <div class="col-sm-4" style="padding-top:20px;">
                                                            @{
                                                                var ex = _db.ExtraItem.Where(x => x.Id == item.ExtraItemId).FirstOrDefault();

                                                            }
                                                            @_db.StoreOutItem.Where(x => x.Id == ex.StoreOutItemId).FirstOrDefault().Name
                                                        </div>

                                                        <div class="col-sm-6" style="padding-top:6px;">
                                                            <input type="number" id="EitmLnQ" name="EitmLnQ" class="form-control col-sm-5" value="1" placeholder="Quantity">

                                                        </div>
                                                    }
                                                    @*<div class="row">*@
                                                    <div class="col-sm-4">

                                                    </div>

                                                    <div class="col-sm-4">

                                                    </div>
                                                    <div class="col-sm-4">
                                                        <button onclick="ExtraItemUpdate(2)" class="btn bg-pink waves-effect">Order</button>

                                                    </div>


                                                    @*</div>*@

                                                }
                                                else
                                                {

                                                    double q = 0;
                                                    @foreach (var item in ExItemLn)
                                                    {
                                                        int ct = 0;
                                                        foreach (var i in ExItemLnFromCustomerChoiceV2)
                                                        {

                                                            if (item.ExtraItemId == i.ExtraItemId)
                                                            {
                                                                ct = 1;
                                                                q = i.quantity;
                                                                break;
                                                            }

                                                        }
                                                        if (ct == 1)
                                                        {
                                                            <div class="col-sm-2">
                                                                <div class="form-check">
                                                                    <label class="form-check-label">
                                                                        <input class="form-check-input" name="itemcheck2" type="checkbox" value="@item.Id" checked>
                                                                        <span class="form-check-sign">
                                                                            <span class="check"></span>
                                                                        </span>
                                                                    </label>
                                                                </div>
                                                            </div>

                                                            <div class="col-sm-4" style="padding-top:20px;">
                                                                @{
                                                                    var ex = _db.ExtraItem.Where(x => x.Id == item.ExtraItemId).FirstOrDefault();

                                                                }
                                                                @_db.StoreOutItem.Where(x => x.Id == ex.StoreOutItemId).FirstOrDefault().Name
                                                            </div>

                                                            <div class="col-sm-6" style="padding-top:6px;">
                                                                <input type="number" id="EitmLnQ" name="EitmLnQ" class="form-control col-sm-5" value="@q" placeholder="Quantity">

                                                            </div>
                                                        }
                                                        else
                                                        {
                                                            <div class="col-sm-2">
                                                                <div class="form-check">
                                                                    <label class="form-check-label">
                                                                        <input class="form-check-input" name="itemcheck2" type="checkbox" value="@item.Id" unchecked>
                                                                        <span class="form-check-sign">
                                                                            <span class="check"></span>
                                                                        </span>
                                                                    </label>
                                                                </div>
                                                            </div>

                                                            <div class="col-sm-4" style="padding-top:20px;">
                                                                @{
                                                                    var ex = _db.ExtraItem.Where(x => x.Id == item.ExtraItemId).FirstOrDefault();

                                                                }
                                                                @_db.StoreOutItem.Where(x => x.Id == ex.StoreOutItemId).FirstOrDefault().Name
                                                            </div>

                                                            <div class="col-sm-6" style="padding-top:6px;">
                                                                <input type="number" id="EitmLnQ" name="EitmLnQ" class="form-control col-sm-5" value="" placeholder="Quantity">

                                                            </div>

                                                        }
                                                    }
                                                    @*<div class="row">*@
                                                    <div class="col-sm-4">

                                                    </div>

                                                    <div class="col-sm-4">

                                                    </div>
                                                    <div class="col-sm-4">
                                                        <button onclick="ExtraItemUpdate(2)" class="btn bg-pink waves-effect">Order</button>

                                                    </div>


                                                    @*</div>*@

                                                }
                                            }
                                        }
                                        else
                                        {
                                            @foreach (var item in ExItemLn)
                                            {
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                    </div>
                                                    <div class="col-sm-4">
                                                        @{
                                                            var ex = _db.ExtraItem.Where(x => x.Id == item.ExtraItemId).FirstOrDefault();

                                                        }
                                                        @_db.StoreOutItem.Where(x => x.Id == ex.StoreOutItemId).FirstOrDefault().Name
                                                    </div>
                                                    <div class="col-sm-4">
                                                    </div>
                                                </div>

                                            }
                                            <div class="row">
                                                You can just view,can't choose extra item.As Meal is Off.
                                            </div>

                                        }




                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- #END# Visitors -->
                    <!-- Visitors -->
                    <!-- #END# Visitors -->

                </div>
            </div>
        </div>


        <div class="card">
            <div class=" card-header-tabs card-header-success" style="text-align: center; font-size: 15px; font-weight: bold;">
                Daily Food Routine
            </div>
            <div class="card-body">
                @*<div class="row">*@
                @{
                    int dcnt = 0;

                }
                @foreach (var d in Days)
                {
                    var daynm = WeekDays.ElementAt(dcnt);
                    var brkID = "#" + daynm + "_1";
                    var tbrkID = "#" + daynm + "_3";
                    var lnID = "#" + daynm + "_2";

                    <div class="row">
                        <div class="card">
                            <div class="body">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-12 col-md-6 col-md-6"><div class="font-bold m-b--35">@daynm</div></div>


                                </div>
                            </div>
                            <div class="body">
                                <ul class="nav nav-tabs tab-nav-right" role="tablist">

                                    <li role="presentation" class="active"><a href="@brkID" data-toggle="tab" aria-expanded="true">Breakfast</a></li>
                                    <li role="presentation" class=""><a href="@lnID" data-toggle="tab" aria-expanded="false">Lunch</a></li>
                                    <li role="presentation" class=""><a href="@tbrkID" data-toggle="tab" aria-expanded="false">Tea Break</a></li>

                                </ul>

                                <!-- Tab panes -->
                                <div class="tab-content">
                                    @foreach (var m in _context.MealType.Where(x => x.Id <= 3).ToList())
                                    {
                                        var pnlId = daynm + "_" + @m.Id.ToString();
                                        var panelClass = @m.Id == 1 ? "tab-pane active in" : "tab-pane";
                                        var ExItemFromCutomerMenuChoice = _db.CustomerDailyMenuChoice.Where(x => x.MealTypeId == @m.Id && x.OrderTypeId == 10003 && x.Day == d && x.UserId == UserId).ToList();
                                        var userMealStatus = _db.PreOrderSchedule.Where(x => x.MealTypeId == m.Id && x.UserId == UserId).FirstOrDefault() == null ? false :
                                            _db.PreOrderSchedule.Where(x => x.MealTypeId == m.Id && x.UserId == UserId).FirstOrDefault().IsPreOrderSet;

                                        <div role="tabpanel" class="@panelClass" id="@pnlId">
                                            @{
                                                var ExItemMeal = _db.MenuItem.Where(x => x.MealTypeId == @m.Id && x.Day == d).ToList();

                                                var itemInpId = "ExItemInp_" + pnlId;
                                                var itemChkId = "ExItemChk_" + pnlId;
                                            }

                                            @if (userMealStatus == true)
                                            {

                                                Boolean c = true;



                                                if (SetMenuListBrk.Count > 0 && ExItemFromCutomerMenuChoice.Count == 0)
                                                {
                                                    @foreach (var item in ExItemMeal)
                                                    {
                                                        @*<div class="row">*@

                                                        <div class="col-sm-2">
                                                            <div class="form-check">
                                                                <label class="form-check-label">
                                                                    <input class="form-check-input" name="@itemChkId" type="checkbox" value="@item.ExtraItemId" unchecked>
                                                                    <span class="form-check-sign">
                                                                        <span class="check"></span>
                                                                    </span>
                                                                </label>
                                                            </div>
                                                        </div>

                                                        <div class="col-sm-4" style="padding-top:20px;">
                                                            @{
                                                                var ex = _context.ExtraItem.Where(x => x.Id == @item.ExtraItemId).FirstOrDefault();
                                                            }

                                                            @_db.StoreOutItem.Where(x => x.Id == ex.StoreOutItemId).FirstOrDefault().Name
                                                        </div>

                                                        <div class="col-sm-6" style="padding-top:6px;">
                                                            <input type="number" id="@itemInpId" name="@itemInpId" class="form-control col-sm-5" value="" placeholder="Quantity">

                                                        </div>

                                                        @*</div>*@
                                                    }
                                                    @*<div class="row">*@
                                                    <div class="col-sm-4">

                                                    </div>

                                                    <div class="col-sm-4">

                                                    </div>
                                                    <div class="col-sm-4">
                                                        @*<button onclick="ExtraItemUpdate(1)" class="btn bg-pink waves-effect">Order</button>*@

                                                    </div>


                                                    @*</div>*@
                                                }
                                                else
                                                {

                                                    @if (ExItemFromCutomerMenuChoice.Count == 0)
                                                    {
                                                        var sl = 0;
                                                        @*@if(SetMenuListBrk.Count == 0)
                                                            {*@
                                                        @foreach (var item in ExItemMeal)
                                                        {
                                                            sl++;
                                                            <div class="row">


                                                                <div class="col-sm-2">
                                                                    <div class="form-check">
                                                                        <label class="form-check-label">
                                                                            <input class="form-check-input" name="@itemChkId" onchange="CreteDailyMenu()" type="checkbox" value="@item.ExtraItemId" unchecked>
                                                                            <span class="form-check-sign">
                                                                                <span class="check"></span>
                                                                            </span>
                                                                        </label>
                                                                    </div>
                                                                </div>

                                                                <div class="col-sm-4" style="padding-top:20px;">

                                                                    @{
                                                                        var ex = _context.ExtraItem.Where(x => x.Id == @item.ExtraItemId).FirstOrDefault();
                                                                    }

                                                                    @_db.StoreOutItem.Where(x => x.Id == ex.StoreOutItemId).FirstOrDefault().Name
                                                                </div>

                                                                <div class="col-sm-3" style="padding-top:6px;">
                                                                    <input type="number" id="@itemInpId" name="@itemInpId" oninput="CreteDailyMenu()" class="form-control col-sm-5" value="" placeholder="Quantity">

                                                                </div>
                                                                <div class="col-sm-3" style="padding-top:6px;">
                                                                    <div class="col-sm-3">
                                                                        @if (sl == 1)
                                                                        {
                                                                            @if (m.Id == 1)
                                                                            {
                                                                                <p style="font-size:14px;font-weight: bold;color: red;">
                                                                                    Extra - @brkItemList
                                                                                </p>


                                                                            }
                                                                            else if (m.Id == 2)
                                                                            {
                                                                                <p style="font-size:14px;font-weight: bold;color: red;">
                                                                                    Extra - @lunchItemList
                                                                                </p>

                                                                            }
                                                                            else

                                                                            {
                                                                                <p style="font-size:14px;font-weight: bold;color: red;">
                                                                                    Extra - @tbrkItemList
                                                                                </p>

                                                                            }
                                                                        }
                                                                    </div>

                                                                </div>

                                                            </div>
                                                        }


                                                    }
                                                    else
                                                    {

                                                        double q = 0;
                                                        var sl = 0;
                                                        @foreach (var item in ExItemMeal)
                                                        {
                                                            int ct = 0;
                                                            sl++;
                                                            foreach (var i in ExItemFromCutomerMenuChoice)
                                                            {

                                                                if (item.ExtraItemId == i.ExtraItemId)
                                                                {
                                                                    ct = 1;
                                                                    q = i.quantity;
                                                                    break;
                                                                }

                                                            }
                                                            <div class="row">

                                                                @if (ct == 1)
                                                                {

                                                                    <div class="col-sm-2">
                                                                        <div class="form-check">
                                                                            <label class="form-check-label">
                                                                                <input class="form-check-input" name="@itemChkId" onchange="CreteDailyMenu()" type="checkbox" value="@item.ExtraItemId" checked>
                                                                                <span class="form-check-sign">
                                                                                    <span class="check"></span>
                                                                                </span>
                                                                            </label>
                                                                        </div>
                                                                    </div>

                                                                    <div class="col-sm-4" style="padding-top:20px;">

                                                                        @{
                                                                            var ex = _context.ExtraItem.Where(x => x.Id == @item.ExtraItemId).FirstOrDefault();
                                                                        }

                                                                        @_db.StoreOutItem.Where(x => x.Id == ex.StoreOutItemId).FirstOrDefault().Name
                                                                    </div>

                                                                    <div class="col-sm-3" style="padding-top:6px;">
                                                                        <input type="number" id="@itemInpId" name="@itemInpId" oninput="CreteDailyMenu()" class="form-control col-sm-5" value="@q" placeholder="Quantity">

                                                                    </div>


                                                                }
                                                                else
                                                                {
                                                                    @*<div class="row">*@

                                                                    <div class="col-sm-2">
                                                                        <div class="form-check">
                                                                            <label class="form-check-label">
                                                                                <input class="form-check-input" name="@itemChkId" onchange="CreteDailyMenu()" type="checkbox" value="@item.ExtraItemId" unchecked>
                                                                                <span class="form-check-sign">
                                                                                    <span class="check"></span>
                                                                                </span>
                                                                            </label>
                                                                        </div>
                                                                    </div>

                                                                    <div class="col-sm-4" style="padding-top:20px;">

                                                                        @{
                                                                            var ex = _context.ExtraItem.Where(x => x.Id == @item.ExtraItemId).FirstOrDefault();
                                                                        }

                                                                        @_db.StoreOutItem.Where(x => x.Id == ex.StoreOutItemId).FirstOrDefault().Name
                                                                    </div>

                                                                    <div class="col-sm-3" style="padding-top:6px;">
                                                                        <input type="number" id="@itemInpId" name="@itemInpId" oninput="CreteDailyMenu()" class="form-control col-sm-5" value="" placeholder="Quantity">

                                                                    </div>

                                                                    @*</div>*@

                                                                }

                                                            <div class="col-sm-3">
                                                                @if (sl == 1)
                                                                {
                                                                    @if (m.Id == 1)
                                                                    {
                                                                        <p style="font-size:14px;font-weight: bold;color: red;">
                                                                            Extra - @brkItemList
                                                                        </p>


                                                                    }
                                                                    else if (m.Id == 2)
                                                                    {
                                                                        <p style="font-size:14px;font-weight: bold;color: red;">
                                                                            Extra - @lunchItemList
                                                                        </p>

                                                                    }
                                                                    else

                                                                    {
                                                                        <p style="font-size:14px;font-weight: bold;color: red;">
                                                                            Extra - @tbrkItemList
                                                                        </p>

                                                                    }
                                                                }
                                                            </div>
                                                            </div>
                                                        }
                                                        @*<div class="row">*@
                                                        <div class="col-sm-4">

                                                        </div>

                                                        <div class="col-sm-4">

                                                        </div>
                                                        <div class="col-sm-4">
                                                            @*<button onclick="ExtraItemUpdate(1)" class="btn bg-pink waves-effect">Order</button>*@

                                                        </div>



                                                    }
                                                }


                                            }
                                            else
                                            {
                                                @foreach (var item in ExItemMeal)
                                                {
                                                    <div class="row">
                                                        <div class="col-sm-4">
                                                        </div>
                                                        <div class="col-sm-4">

                                                            @{
                                                                var ex = _context.ExtraItem.Where(x => x.Id == @item.ExtraItemId).FirstOrDefault();
                                                            }

                                                            @_db.StoreOutItem.Where(x => x.Id == ex.StoreOutItemId).FirstOrDefault().Name
                                                        </div>
                                                        <div class="col-sm-4">
                                                        </div>
                                                    </div>

                                                }
                                                <div class="row">
                                                    You can just view, can't choose extra item.As Meal is Off.
                                                </div>
                                            }


                                        </div>
                                    }

                                </div>
                            </div>
                        </div>
                    </div>

                    dcnt++;
                }

                @*</div>*@

                <div class="row">
                    <div class="col-sm-10">

                    </div>
                    <div class="col-sm-2">
                        @*<button class="btn btn-success" style="padding:3px;" onclick="CreteDailyMenu()"> Submit </button>*@
                    </div>
                </div>
            </div>

        </div>



    </div>







    <script src="~/lib/jquery/dist/jquery.js"></script>
    <script src="~/js/ConsumerDashboardController.js"></script>







</section>

<script>

    function CreteDailyMenu() {
        var mod = document.getElementById("loadModal");
        mod.style.display = "block";
        var dayList = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday"];
        var itemInpPrefix = "ExItemInp_";
        var itemChkPrefix = "ExItemChk_";
        var addedItem = [];
        var quantityList = [];
        var checkBoxAdded = [];
        var totalItemList;
        for (var i = 0; i < 5; i++) {
            var day = i + 1;
            for (var j = 0; j < 3; j++) {
                var meal = j + 1;
                quantityList = document.getElementsByName(itemInpPrefix + dayList[i] + "_" + meal);
                checkBoxAdded = document.getElementsByName(itemChkPrefix + dayList[i] + "_" + meal);
                var checkBoxLengthAdded = checkBoxAdded.length;
                for (var k = 0; k < checkBoxLengthAdded; k++) {

                    if (checkBoxAdded[k].checked == true) {

                        var tempQuantityValueAdded = quantityList[k].value.toString();
                        var tempItemValueAdded = checkBoxAdded[k].value.toString();

                        if (parseInt(tempQuantityValueAdded) <= 0 || tempQuantityValueAdded === "") {
                            mod.style.display = "none";

                            alert("Quantity should be greater than 0");
                            return;
                        }

                        var obj = { ItemId: tempItemValueAdded, Quantity: tempQuantityValueAdded, Day: day, Meal: meal };
                        addedItem.push(obj);
                    }

                }

                quantityList = [];
                checkBoxAdded = [];
            }
        }

        totalItemList = JSON.stringify(addedItem);
        console.log(addedItem);
        $.ajax({
            url: '/Consumer/CreateDailyMenu',
            type: "POST",
            data: { ItemList: totalItemList },
            success: function (response) {
                if (response.success) {
                    mod.style.display = "none";

                    alert(response.responseText);
                    window.location.reload(true);


                } else {
                    // DoSomethingElse()
                    //if (response.responseText == "Expire") {
                    //    window.location.href = "https://ucam.bup.edu.bd/Security/LogOut.aspx";
                    //}
                    //else {
                    //    alert(response.responseText);
                    //    window.location.reload(true);

                    //}

                }
            }


        })
    }


</script>

